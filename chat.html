<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat Gemini Multi-View</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #f59e0b;
            --dark: #1e293b;
            --light: #f8fafc;
            --gray: #94a3b8;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        @keyframes typingDots {
            0%, 20% { content: "."; }
            40% { content: ".."; }
            60%, 100% { content: "..."; }
        }

        .animate-float {
            animation: float 3s ease-in-out infinite;
        }

        .message-enter {
            animation: fadeIn 0.3s ease-out;
        }

        .typing-indicator::after {
            content: "...";
            animation: typingDots 1.5s infinite;
        }

        .gradient-bg {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
        }

        .chat-container {
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        .message-bubble {
            border-radius: 1.125rem 1.125rem 1.125rem 0;
            filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.1));
            transition: all 0.3s ease;
        }

        .message-bubble.user {
            border-radius: 1.125rem 1.125rem 0 1.125rem;
        }

        .message-bubble:hover {
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.15));
        }

        .input-field {
            transition: all 0.3s ease;
            box-shadow: inset 0 2px 4px 0 rgba(0, 0, 0, 0.05);
        }

        .input-field:focus {
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.3);
        }

        .send-button {
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        .send-button:hover {
            transform: translateY(-1px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        .send-button:active {
            transform: translateY(0);
        }

        .modal-content {
            animation: fadeIn 0.3s ease-out;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            background-color: var(--primary);
        }

        .bot-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--secondary);
            color: white;
        }

        .markdown-content p {
            margin-bottom: 0.75rem;
            line-height: 1.5;
        }

        .markdown-content ul, .markdown-content ol {
            margin-left: 1.25rem;
            margin-bottom: 0.75rem;
        }

        .markdown-content li {
            margin-bottom: 0.25rem;
        }

        .markdown-content code {
            background-color: rgba(0, 0, 0, 0.05);
            color: var(--danger);
            padding: 0.2rem 0.4rem;
            border-radius: 0.25rem;
            font-family: monospace;
            font-size: 0.9em;
        }

        .markdown-content pre {
            background-color: rgba(0, 0, 0, 0.05);
            border-radius: 0.375rem;
            padding: 0.75rem;
            overflow-x: auto;
            margin-bottom: 0.75rem;
        }

        .markdown-content pre code {
            background-color: transparent;
            padding: 0;
            color: inherit;
        }

        .markdown-content a {
            color: var(--primary);
            text-decoration: underline;
        }

        .markdown-content a:hover {
            color: var(--primary-dark);
        }

        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }

        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        @media (max-width: 640px) {
            .mobile-flex-col {
                flex-direction: column;
            }
            
            .mobile-w-full {
                width: 100% !important;
            }
            
            .mobile-mt-2 {
                margin-top: 0.5rem;
            }
        }
    </style>
</head>
<body class="bg-gray-50 font-sans antialiased">

<!-- Welcome Modal -->
<div id="welcome-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
    <div class="modal-content bg-white rounded-xl p-6 max-w-md w-full mx-4 transform transition-all">
        <div class="flex justify-center mb-4">
            <div class="gradient-bg text-white p-3 rounded-full animate-float">
                <i class="fas fa-robot text-2xl"></i>
            </div>
        </div>
        <h2 class="text-2xl font-bold text-center text-gray-800 mb-4">Bem-vindo ao Chat Gemini!</h2>
        <p class="text-gray-600 text-center mb-4">Escolha um nome de usuário para começar</p>
        
        <div class="mb-4">
            <input type="text" id="username-input" placeholder="Seu nome de usuário" 
                   class="username-input input-field w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
            <p id="username-error" class="text-sm text-red-500 mt-2 h-4"></p>
        </div>
        
        <button id="save-username-btn" class="w-full gradient-bg text-white px-4 py-3 rounded-lg font-semibold transition-all hover:opacity-90 active:scale-95">
            <i class="fas fa-sign-in-alt mr-2"></i> Entrar no Chat
        </button>
        
        <p class="text-xs text-gray-500 mt-4 text-center">Seu nome será visível para outros usuários</p>
    </div>
</div>

<!-- Main Chat Container -->
<div class="container mx-auto max-w-4xl h-screen flex flex-col p-2 sm:p-4">
    <!-- Header -->
    <header class="gradient-bg text-white rounded-xl shadow-md p-3 mb-3 sm:mb-4 flex items-center justify-between">
        <div class="flex items-center space-x-3">
            <div class="bot-avatar">
                <i class="fas fa-robot"></i>
            </div>
            <div>
                <h1 class="text-lg sm:text-xl font-bold">Chat Gemini</h1>
                <p class="text-xs opacity-80">Conecte-se e converse com IA</p>
            </div>
        </div>
        
        <div class="flex items-center space-x-3">
            <div id="user-info" class="flex items-center space-x-2">
                <div id="user-avatar" class="user-avatar hidden"></div>
                <div class="hidden sm:block">
                    <span id="username-display" class="text-sm font-medium">...</span>
                    <span class="text-xs opacity-70 block">ID: <span id="device-id-display">...</span></span>
                </div>
            </div>
            
            <div id="user-status" class="flex items-center space-x-1 bg-white bg-opacity-20 px-2 py-1 rounded-full">
                <span id="status-indicator" class="h-2 w-2 rounded-full bg-gray-300"></span>
                <span id="status-text" class="text-xs">Offline</span>
            </div>
        </div>
    </header>

    <!-- Controls -->
    <div class="mb-3 sm:mb-4 bg-white rounded-xl shadow-sm p-3 flex flex-col md:flex-row gap-4 mobile-flex-col">
        <div class="w-full md:w-auto mobile-w-full">
            <label for="model-select" class="block text-sm font-medium text-gray-700 mb-1">Modelo de IA:</label>
            <select id="model-select" class="block w-full pl-3 pr-10 py-2 text-sm border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent input-field">
                <!-- Options will be populated by JS -->
            </select>
        </div>
        
        <div class="flex-grow mobile-w-full">
            <label class="block text-sm font-medium text-gray-700 mb-1">Visualização:</label>
            <div class="flex flex-wrap gap-2 items-center mobile-flex-col mobile-items-stretch">
                <button id="btn-general-chat" class="chat-view-button chat-view-button-active px-4 py-2 rounded-lg text-sm font-medium transition-all">
                    <i class="fas fa-users mr-2"></i> Geral
                </button>
                <button id="btn-my-chat" class="chat-view-button px-4 py-2 rounded-lg text-sm font-medium transition-all">
                    <i class="fas fa-user mr-2"></i> Meu Chat
                </button>
                <div class="flex items-center gap-2 flex-grow mobile-w-full mobile-mt-2">
                    <input type="text" id="user-search-input" placeholder="Buscar usuário..." 
                           class="flex-1 px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-indigo-500 focus:border-indigo-500 input-field">
                    <button id="btn-other-chat" class="chat-view-button px-4 py-2 rounded-lg text-sm font-medium transition-all whitespace-nowrap">
                        <i class="fas fa-search mr-2"></i> Buscar
                    </button>
                </div>
            </div>
            <p class="text-xs text-gray-500 mt-2" id="current-chat-info">Visualizando: Chat Geral</p>
        </div>
    </div>

    <!-- Chat Messages -->
    <div class="bg-white rounded-xl shadow-sm overflow-hidden flex flex-col flex-grow min-h-0 chat-container">
        <div id="chat-messages" class="p-3 sm:p-4 space-y-4 overflow-y-auto flex-grow min-h-0 scrollbar-hide">
            <div class="text-center text-gray-500 py-10 initial-message">
                <div class="gradient-bg text-white p-4 rounded-full inline-block mb-3 animate-float">
                    <i class="fas fa-comments text-2xl"></i>
                </div>
                <p class="text-sm sm:text-base font-medium">Carregando conversas...</p>
                <p class="text-xs mt-2">Aguarde enquanto carregamos as mensagens</p>
            </div>
        </div>
        
        <div id="typing-indicator" class="hidden bg-gray-50 px-4 py-3 text-gray-500 text-sm flex items-center">
            <div class="typing-dots flex space-x-1 mr-3">
                <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay: 0ms"></div>
                <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay: 150ms"></div>
                <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay: 300ms"></div>
            </div>
            <span class="typing-indicator">Gemini está digitando</span>
        </div>
        
        <div class="border-t border-gray-200 p-3 bg-gray-50">
            <form id="message-form" class="flex space-x-2">
                <input id="message-input" type="text" placeholder="Digite sua mensagem..." 
                       class="flex-1 px-4 py-3 rounded-full border border-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-sm sm:text-base input-field" 
                       autocomplete="off" disabled>
                <button type="submit" aria-label="Enviar mensagem" 
                        class="gradient-bg text-white px-4 py-3 rounded-full transition-all send-button flex items-center justify-center" disabled>
                    <i class="fas fa-paper-plane"></i>
                </button>
            </form>
            <div class="flex justify-between items-center mt-2">
                <span id="connection-status" class="text-xs text-gray-500 flex items-center">
                    <i class="fas fa-circle mr-1 text-gray-400"></i> Conectando...
                </span>
                <span id="message-count" class="text-xs text-gray-500">0 mensagens</span>
            </div>
        </div>
    </div>
</div>

<script type="module">
   const _0x8d4032=_0x2d35;(function(_0x197d25,_0x485338){const _0x5d9f69=_0x2d35,_0x5ee80b=_0x197d25();while(!![]){try{const _0x16a709=-parseInt(_0x5d9f69(0x150))/0x1+-parseInt(_0x5d9f69(0x129))/0x2*(-parseInt(_0x5d9f69(0x12a))/0x3)+parseInt(_0x5d9f69(0xbb))/0x4+parseInt(_0x5d9f69(0x1c6))/0x5*(parseInt(_0x5d9f69(0x181))/0x6)+-parseInt(_0x5d9f69(0x1c4))/0x7*(-parseInt(_0x5d9f69(0xcd))/0x8)+-parseInt(_0x5d9f69(0xa7))/0x9+-parseInt(_0x5d9f69(0x1b0))/0xa;if(_0x16a709===_0x485338)break;else _0x5ee80b['push'](_0x5ee80b['shift']());}catch(_0x3f13f3){_0x5ee80b['push'](_0x5ee80b['shift']());}}}(_0x3d32,0xc15b7));const _0x12323b=_0x2050;(function(_0x5c99f7,_0x79faba){const _0x4d7327=_0x2d35,_0x20d554=_0x2050,_0x279f48=_0x5c99f7();while(!![]){try{const _0x4d1939=-parseInt(_0x20d554(0x241))/0x1*(-parseInt(_0x20d554(0x1fd))/0x2)+parseInt(_0x20d554(0x296))/0x3+-parseInt(_0x20d554(0x320))/0x4*(parseInt(_0x20d554(0x24b))/0x5)+-parseInt(_0x20d554(0x274))/0x6+parseInt(_0x20d554(0x27d))/0x7*(parseInt(_0x20d554(0x331))/0x8)+-parseInt(_0x20d554(0x323))/0x9+parseInt(_0x20d554(0x262))/0xa*(parseInt(_0x20d554(0x33b))/0xb);if(_0x4d1939===_0x79faba)break;else _0x279f48[_0x4d7327(0x1cc)](_0x279f48[_0x4d7327(0xba)]());}catch(_0x55177c){_0x279f48[_0x4d7327(0x1cc)](_0x279f48['shift']());}}}(_0x2b27,0x21c1f));import{GoogleGenerativeAI}from'https://esm.run/@google/generative-ai';const firebaseConfig={'apiKey':_0x8d4032(0xea),'authDomain':_0x12323b(0x28f),'projectId':_0x12323b(0x2a5),'storageBucket':_0x12323b(0x207),'messagingSenderId':_0x8d4032(0x138),'appId':_0x12323b(0x2e5),'measurementId':_0x12323b(0x275)},GEMINI_API_KEY=_0x12323b(0x2c8),AVAILABLE_MODELS=[{'id':_0x12323b(0x218),'name':_0x12323b(0x2c6)}];let currentModelId=AVAILABLE_MODELS[0x0]['id'],currentChatView=_0x12323b(0x25c),targetChatId=null,USER_DEVICE_ID=null,USERNAME=null,genAI,chat=null,currentFirebaseListener=null,currentMessagesRef=null,isGeminiTyping=![],messageCounter=0x0,initialLoadComplete=![];try{firebase[_0x12323b(0x216)](firebaseConfig);}catch(_0x11529b){console[_0x12323b(0x246)](_0x12323b(0x1ec),_0x11529b),alert(_0x12323b(0x2dd));}const database=firebase['database'](),connectedRef=database[_0x12323b(0x2f1)](_0x8d4032(0x10b));try{if(!GEMINI_API_KEY||GEMINI_API_KEY===_0x12323b(0x2e9))throw new Error(_0x8d4032(0x145));genAI=new GoogleGenerativeAI(GEMINI_API_KEY);}catch(_0x4b1cbd){console[_0x12323b(0x246)](_0x12323b(0x281),_0x4b1cbd),alert(_0x12323b(0x2cb)+_0x4b1cbd[_0x8d4032(0x169)]+_0x12323b(0x23b)),document[_0x12323b(0x202)](_0x12323b(0x253))[_0x12323b(0x31e)]=!![],document[_0x8d4032(0x172)](_0x8d4032(0xcc))[_0x12323b(0x31e)]=!![];}const messageForm=document[_0x12323b(0x202)](_0x12323b(0x263)),messageInput=document[_0x12323b(0x202)](_0x8d4032(0xbc)),messageSubmitButton=messageForm[_0x12323b(0x1e6)](_0x12323b(0x33e)),chatMessages=document[_0x12323b(0x202)](_0x12323b(0x33d)),typingIndicator=document[_0x8d4032(0xd0)](_0x12323b(0x28a)),statusIndicator=document[_0x12323b(0x202)](_0x12323b(0x205)),statusText=document[_0x12323b(0x202)]('status-text'),connectionStatus=document[_0x12323b(0x202)](_0x12323b(0x1f4)),messageCount=document[_0x12323b(0x202)](_0x12323b(0x29a)),modelSelect=document[_0x12323b(0x202)](_0x12323b(0x203)),deviceIdDisplay=document[_0x8d4032(0xd0)](_0x8d4032(0x1d6)),btnGeneralChat=document[_0x12323b(0x202)](_0x12323b(0x1ed)),btnMyChat=document[_0x8d4032(0xd0)](_0x12323b(0x228)),btnOtherChat=document[_0x12323b(0x202)](_0x12323b(0x313)),userSearchInput=document[_0x12323b(0x202)](_0x12323b(0x27f)),currentChatInfo=document[_0x12323b(0x202)](_0x12323b(0x302)),welcomeModal=document[_0x12323b(0x202)](_0x12323b(0x22e)),usernameInput=document[_0x12323b(0x202)](_0x12323b(0x33a)),saveUsernameBtn=document[_0x12323b(0x202)](_0x12323b(0x248)),usernameDisplay=document[_0x8d4032(0xd0)](_0x8d4032(0x168)),usernameError=document[_0x12323b(0x202)](_0x12323b(0x2ec)),userAvatar=document[_0x12323b(0x202)](_0x12323b(0x230));function sanitizeForFirebasePath(_0x9a8f65){const _0x333922=_0x12323b;if(!_0x9a8f65)return'';return _0x9a8f65[_0x333922(0x2ff)](/[.#$[\]/]/g,'_');}function _0x2050(_0x364913,_0x54be19){const _0x32dfd2=_0x2b27();return _0x2050=function(_0x57d80e,_0x3e758c){_0x57d80e=_0x57d80e-0x1e1;let _0x22b70e=_0x32dfd2[_0x57d80e];return _0x22b70e;},_0x2050(_0x364913,_0x54be19);}function escapeHtml(_0x23b918){const _0x26e112=_0x8d4032,_0x2ccac9=_0x12323b;if(typeof _0x23b918!==_0x2ccac9(0x272))return'';return _0x23b918[_0x2ccac9(0x2ff)](/&/g,_0x2ccac9(0x1f6))[_0x2ccac9(0x2ff)](/</g,_0x2ccac9(0x213))[_0x26e112(0x1b4)](/>/g,_0x2ccac9(0x298))[_0x2ccac9(0x2ff)](/"/g,_0x2ccac9(0x317))[_0x2ccac9(0x2ff)](/'/g,_0x2ccac9(0x2ad));}function formatMarkdown(_0x1bb0c0){const _0x48c6e1=_0x8d4032,_0x10e6e3=_0x12323b;if(typeof _0x1bb0c0!==_0x10e6e3(0x272))return'';const _0x3e326d={};let _0x4d17c9=0x0,_0xe827e3=_0x1bb0c0[_0x10e6e3(0x2ff)](/```([\s\S]*?)```/gs,(_0x2413a3,_0x4fa2e5)=>{const _0x212fb3=_0x2d35,_0x4c97b3=_0x10e6e3,_0x275993=_0x212fb3(0x142)+_0x4d17c9++ +'__';return _0x3e326d[_0x275993]=_0x4c97b3(0x21c)+escapeHtml(_0x4fa2e5)+_0x4c97b3(0x2d0),_0x275993;});_0xe827e3=_0xe827e3[_0x10e6e3(0x2ff)](/\[([^\]]+)\]\(([^)]+)\)/g,_0x10e6e3(0x280)),_0xe827e3=_0xe827e3[_0x10e6e3(0x2ff)](/\*\*(.*?)\*\*/g,_0x10e6e3(0x287)),_0xe827e3=_0xe827e3[_0x10e6e3(0x2ff)](/(?<!\*)\*(?!\*)(.*?)(?<!\*)\*(?!\*)/g,_0x10e6e3(0x2a0)),_0xe827e3=_0xe827e3[_0x48c6e1(0x1b4)](/`([^`]+)`/g,(_0x3f6e0e,_0x3d3646)=>_0x10e6e3(0x25e)+escapeHtml(_0x3d3646)+_0x10e6e3(0x28b));const _0x48e851=_0xe827e3[_0x10e6e3(0x24a)]('\x0a');let _0x1ca0f5=[],_0x1a0a2b=null;_0x48e851[_0x48c6e1(0xf7)](_0x2d4cc5=>{const _0x2b830b=_0x48c6e1,_0xb461e5=_0x10e6e3,_0x4f92a5=_0x2d4cc5[_0xb461e5(0x290)](/^(\s*)([-*+])\s+(.*)/),_0x94969d=_0x2d4cc5['match'](/^(\s*)(\d+\.)\s+(.*)/);if(_0x4f92a5){if(_0x1a0a2b!=='ul'){if(_0x1a0a2b)_0x1ca0f5[_0xb461e5(0x23c)]('</'+_0x1a0a2b+'>');_0x1ca0f5[_0xb461e5(0x23c)](_0xb461e5(0x295)),_0x1a0a2b='ul';}_0x1ca0f5[_0xb461e5(0x23c)](_0xb461e5(0x20c)+_0x4f92a5[0x3]+_0x2b830b(0x13c));}else{if(_0x94969d){if(_0x1a0a2b!=='ol'){if(_0x1a0a2b)_0x1ca0f5[_0xb461e5(0x23c)]('</'+_0x1a0a2b+'>');_0x1ca0f5[_0xb461e5(0x23c)](_0x2b830b(0x130)),_0x1a0a2b='ol';}_0x1ca0f5[_0xb461e5(0x23c)](_0xb461e5(0x20c)+_0x94969d[0x3]+_0xb461e5(0x2c1));}else _0x1a0a2b&&(_0x1ca0f5[_0xb461e5(0x23c)]('</'+_0x1a0a2b+'>'),_0x1a0a2b=null),_0x1ca0f5[_0x2b830b(0x1cc)](_0x2d4cc5);}}),_0x1a0a2b&&_0x1ca0f5[_0x10e6e3(0x23c)]('</'+_0x1a0a2b+'>'),_0xe827e3=_0x1ca0f5[_0x10e6e3(0x334)]('\x0a');for(const _0x524bfe in _0x3e326d){_0xe827e3=_0xe827e3[_0x48c6e1(0x1b4)](_0x524bfe,()=>_0x3e326d[_0x524bfe]);}const _0x26c70a=_0xe827e3[_0x10e6e3(0x24a)](/\n\s*\n/)[_0x10e6e3(0x1ea)](_0x422395=>_0x422395[_0x48c6e1(0x15f)]())[_0x10e6e3(0x28c)](_0x29f908=>_0x29f908)[_0x10e6e3(0x1ea)](_0x37a2b7=>{const _0x528ad0=_0x48c6e1,_0x2443e9=_0x10e6e3;if(_0x37a2b7[_0x528ad0(0x14a)](/^<(ul|ol|pre|h[1-6]|li|blockquote)/))return _0x37a2b7;return _0x2443e9(0x1e3)+_0x37a2b7[_0x2443e9(0x2ff)](/\n/g,_0x2443e9(0x292))+_0x2443e9(0x25b);})['join']('');return _0x26c70a;}function formatTime(_0x387263){const _0x5024a4=_0x8d4032,_0x21fcfb=_0x12323b;if(!_0x387263||typeof _0x387263!==_0x21fcfb(0x256))return'';try{const _0x4e9957=new Date(_0x387263);if(isNaN(_0x4e9957[_0x21fcfb(0x210)]()))return'';const _0x5dd975=new Date(),_0x4df88e=_0x4e9957[_0x21fcfb(0x1e5)]()===_0x5dd975[_0x21fcfb(0x1e5)]()&&_0x4e9957[_0x21fcfb(0x247)]()===_0x5dd975[_0x5024a4(0x86)]()&&_0x4e9957[_0x21fcfb(0x330)]()===_0x5dd975[_0x21fcfb(0x330)]();return _0x4df88e?_0x4e9957[_0x21fcfb(0x259)]([],{'hour':_0x5024a4(0x1ad),'minute':_0x5024a4(0x1ad)}):_0x4e9957[_0x5024a4(0x18f)]([],{'day':_0x21fcfb(0x208),'month':_0x21fcfb(0x208),'year':_0x21fcfb(0x208),'hour':_0x21fcfb(0x208),'minute':_0x21fcfb(0x208)});}catch(_0x4d1e7d){return console[_0x21fcfb(0x246)](_0x21fcfb(0x2e8),_0x4d1e7d,_0x387263),'';}}function scrollToBottom(){setTimeout(()=>{const _0x2f87af=_0x2050;if(chatMessages)chatMessages[_0x2f87af(0x217)]=chatMessages['scrollHeight'];},0x64);}function updateMessageCountDisplay(){const _0xcfd451=_0x8d4032,_0x203ff5=_0x12323b;let _0x58da8d=currentModelId[_0x203ff5(0x2ff)](_0xcfd451(0x16e),'')[_0x203ff5(0x2ff)](_0x203ff5(0x1f8),_0x203ff5(0x222))[_0xcfd451(0x1b4)](_0x203ff5(0x240),'g-'),_0x3f1594='';if(currentChatView===_0x203ff5(0x25c))_0x3f1594=_0x203ff5(0x27b);else{if(currentChatView===_0x203ff5(0x27c))_0x3f1594=_0xcfd451(0x1b5);else{if(currentChatView===_0x203ff5(0x2a1)&&targetChatId)_0x3f1594=_0xcfd451(0x16b)+targetChatId[_0x203ff5(0x1ee)](0x0,0x6)+_0x203ff5(0x299);else _0x3f1594='?';}}if(messageCount)messageCount[_0x203ff5(0x340)]=messageCounter+_0xcfd451(0x93)+_0x3f1594+_0x203ff5(0x211)+_0x58da8d+')';}function updateChatInfoLabel(){const _0x585cb5=_0x12323b;let _0x18030d=_0x585cb5(0x32e);if(currentChatView===_0x585cb5(0x25c))_0x18030d+=_0x585cb5(0x1e4);else{if(currentChatView===_0x585cb5(0x27c))_0x18030d+=_0x585cb5(0x29e);else{if(currentChatView===_0x585cb5(0x2a1)&&targetChatId)_0x18030d+=_0x585cb5(0x306)+targetChatId[_0x585cb5(0x1ee)](0x0,0x8)+'...';else _0x18030d+=_0x585cb5(0x229);}}if(currentChatInfo)currentChatInfo[_0x585cb5(0x340)]=_0x18030d;}function updateActiveButton(){const _0x142cab=_0x8d4032,_0x28fffa=_0x12323b;document[_0x28fffa(0x21b)](_0x28fffa(0x2c3))[_0x28fffa(0x20b)](_0x474649=>{const _0x2d1a10=_0x2d35,_0x44833c=_0x28fffa;_0x474649[_0x44833c(0x2e3)][_0x44833c(0x308)](_0x44833c(0x314),_0x44833c(0x321),_0x2d1a10(0xfd)),_0x474649[_0x44833c(0x2e3)][_0x44833c(0x225)](_0x44833c(0x2f2),_0x44833c(0x29b),_0x44833c(0x2e0));});const _0x1578ce=currentChatView===_0x28fffa(0x25c)?_0x142cab(0x8b):currentChatView===_0x142cab(0x175)?_0x28fffa(0x228):currentChatView===_0x142cab(0x124)?_0x142cab(0x1c5):null;if(_0x1578ce){const _0x5f286b=document[_0x142cab(0xd0)](_0x1578ce);_0x5f286b&&(_0x5f286b[_0x28fffa(0x2e3)][_0x28fffa(0x225)](_0x28fffa(0x314),_0x28fffa(0x321),_0x142cab(0xfd)),_0x5f286b[_0x28fffa(0x2e3)][_0x28fffa(0x308)](_0x28fffa(0x2f2),_0x142cab(0x134),_0x28fffa(0x2e0)));}}function getOrCreateDeviceId(){const _0x2dea86=_0x8d4032,_0x393093=_0x12323b;let _0x552b8e=localStorage[_0x393093(0x1f5)](_0x393093(0x261));return!_0x552b8e?(_0x552b8e=_0x393093(0x22c)+Date[_0x393093(0x30e)]()+'-'+Math['random']()['toString'](0x24)[_0x393093(0x1ee)](0x2,0x8),localStorage[_0x393093(0x2d6)](_0x393093(0x261),_0x552b8e),console[_0x2dea86(0xff)](_0x393093(0x27e),_0x552b8e)):console[_0x393093(0x233)](_0x2dea86(0xe1),_0x552b8e),_0x552b8e;}function updateUserDisplay(){const _0xb7611c=_0x8d4032,_0x47ce05=_0x12323b;if(USERNAME&&usernameDisplay)usernameDisplay['textContent']=USERNAME,userAvatar&&(userAvatar[_0x47ce05(0x340)]=USERNAME[_0x47ce05(0x2ac)](0x0)[_0x47ce05(0x279)](),userAvatar[_0x47ce05(0x2e3)][_0x47ce05(0x308)](_0x47ce05(0x22d)));else usernameDisplay&&(usernameDisplay[_0x47ce05(0x340)]=_0x47ce05(0x32f));if(USER_DEVICE_ID&&deviceIdDisplay){const _0x56cf00=USER_DEVICE_ID[_0xb7611c(0xc6)](0x0,0x8)+_0x47ce05(0x32f);deviceIdDisplay[_0x47ce05(0x340)]=_0x56cf00;}}function _0x3d32(){const _0x464717=['getMonth','click','Termo\x20\x27','Desconectado\x20do\x20Firebase...','gemini-','btn-general-chat','<div\x20class=\x22text-center\x20text-gray-500\x20py-10\x20initial-message\x22><i\x20class=\x22fas\x20fa-comments\x20text-3xl\x20sm:text-4xl\x20mb-2\x22></i><p\x20class=\x22text-sm\x20sm:text-base\x22>Nenhuma\x20mensagem\x20neste\x20chat\x20ainda.</p></div>','Não\x20foi\x20possível\x20identificar\x20o\x20usuário\x20\x27','keys','success','Use\x20apenas\x20letras,\x20números,\x20_\x20ou\x20-.\x20Sem\x20espaços.','Erro\x20crítico:\x20ID\x20do\x20modelo\x20inválido\x20após\x20sanitização.','TIMESTAMP','\x20mensagens\x20(','Nome\x20deve\x20ter\x20entre\x203\x20e\x2015\x20caracteres.','check-circle','classList','Por\x20favor,\x20insira\x20um\x20nome\x20de\x20usuário\x20ou\x20ID\x20para\x20buscar.','text-blue-600','Nenhum\x20listener/ref\x20Firebase\x20anterior\x20para\x20desanexar\x20(ou\x20um\x20deles\x20era\x20null).\x20Ref:','):\x20','Conexão\x20com\x20o\x20Firebase\x20perdida.\x20Tentando\x20reconectar...','Esse\x20nome\x20não\x20é\x20permitido.','45938Aravxg','chat-messages','hidden','Erro\x20ao\x20atualizar\x20status\x20de\x20atividade:','database','change','generalChat/','Erro\x20de\x20rede\x20ao\x20tentar\x20contatar\x20','focus','welcome-modal','2513259xwLjYT','⚠️\x20Lembre-se:\x20Para\x20ver\x20o\x20chat\x20de\x20outro\x20usuário,\x20as\x20Regras\x20de\x20Segurança\x20do\x20Firebase\x20devem\x20permitir\x20leitura\x20em\x20\x27userChats/',')\x20com\x20','permission_denied','user-','...','<div\x20class=\x22user-avatar\x22>','.\x20Verifique\x20sua\x20conexão.','Erro\x20ao\x20verificar\x20existência\x20do\x20usuário\x20','btn-my-chat','<div\x20class=\x22text-center\x20text-red-500\x20py-10\x20initial-message\x22><i\x20class=\x22fas\x20fa-question-circle\x20text-3xl\x20sm:text-4xl\x20mb-2\x22></i><p\x20class=\x22text-sm\x20sm:text-base\x22>Não\x20foi\x20possível\x20encontrar\x20o\x20usuário.</p></div>','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','ServerValue','number','<span\x20class=\x22text-xs\x20text-blue-700\x20ml-2\x22>','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x20mr-2\x22></i>\x20Verificando...','567896PsAPdS','Erro\x20crítico:\x20Não\x20foi\x20possível\x20conectar\x20ao\x20Firebase.','Erro\x20ao\x20inicializar\x20Firebase:','shift','4206504WCNikc','message-input','preventDefault','includes','Histórico\x20inicial\x20carregado\x20para\x20','2ONqOkm','startsWith','</code></pre>','usernames/','):\x20Erro\x20de\x20rede\x20ao\x20contatar\x20a\x20API\x20Gemini.\x20Verifique\x20sua\x20conexão.','Erro:\x20O\x20chat\x20não\x20está\x20pronto\x20para\x20receber\x20mensagens.','substring','<div\x20class=\x22text-center\x20text-red-500\x20py-10\x20initial-message\x22><i\x20class=\x22fas\x20fa-user-slash\x20text-3xl\x20sm:text-4xl\x20mb-2\x22></i><p\x20class=\x22text-sm\x20sm:text-base\x22>Usuário\x20\x27','\x20rounded-xl\x20px-4\x20py-2\x20max-w-[90%]\x20sm:max-w-md\x20lg:max-w-lg\x20text-sm\x20text-center\x20system-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-','exclamation-circle','Erro\x20interno\x20ao\x20preparar\x20para\x20salvar\x20resposta.','1820025AvYXPo','#message-form\x20button[type=\x22submit\x22]','80hYFIto','Erro\x20ao\x20comunicar\x20com\x20Gemini\x20ou\x20salvar\x20resposta\x20(','Erro\x20ao\x20processar\x20sua\x20mensagem\x20com\x20','getElementById','\x27\x20parece\x20ser\x20um\x20ID.\x20Verificando\x20existência...','fetch','val','481105ZOFDmc','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20','Erro\x20Gemini\x20(','sort','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>','model','now','\x20do\x20usuário\x20','error','138972LkkVCY','\x27\x20não\x20encontrado.</p></div>','Listener\x20Firebase\x20anexado\x20em\x20','.chat-view-button','Usando\x20ID\x20de\x20dispositivo\x20existente:','lastActive','Não\x20foi\x20possível\x20determinar\x20o\x20caminho\x20del\x20chat\x20no\x20Firebase.','AIzaSyDF5wOFJPEuhrlD9s0m1ZjYLg-IIPWsCRg','userDeviceId','startAt','Este\x20nome\x20já\x20está\x20em\x20uso!','RESOURCE_EXHAUSTED','Inicializando\x20chat...','AIzaSyBL7oI8tr3rseMyQW6ouPVwbfZKGUfwJ1s','user','Erro\x20ao\x20buscar\x20username\x20no\x20Firebase:','4sIEVyc','\x27\x20(encontrado\x20ou\x20digitado)\x20não\x20existe\x20no\x20nó\x20/users.','Modelo\x20selecionado:\x20','text','addEventListener','orderByChild','<code>','1418952ITeVQd','target','Mensagem\x20bloqueada\x20por\x20','forEach','remove','cursor-not-allowed','animate-pulse','Erro:\x20ID\x20do\x20modelo\x20inválido\x20ao\x20tentar\x20salvar\x20mensagem.','ID\x20do\x20modelo\x20inválido\x20após\x20sanitização\x20para\x20salvar\x20resposta.','text-white','\x20Para\x20ver\x20o\x20chat\x20de\x20outro\x20usuário,\x20as\x20regras\x20para\x20\x27/userChats/$userId\x27\x20devem\x20permitir\x20leitura.','log','\x20px-4\x20py-3\x20max-w-[80%]\x20sm:max-w-[75%]\x20break-words\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20items-center\x20mb-1\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22font-medium\x22>','Visualizando:\x20','Nome\x20de\x20usuário\x20\x27','Novo\x20ID\x20de\x20dispositivo\x20criado:','length','&amp;','msg-','Dados\x20do\x20usuário\x20salvos\x20no\x20Firebase\x20com\x20sucesso.','Listener\x20Firebase\x20desanexado\x20com\x20sucesso.','Erro:\x20ID\x20do\x20dispositivo\x20não\x20definido.','<i\x20class=\x22fas\x20fa-circle\x20mr-1\x20text-green-500\x22></i>\x20Conectado','.info/connected','username','hover:bg-gray-200','code','<br>','gaamini-teste-api','Nova\x20mensagem\x20recebida\x20via\x20listener\x20(','Erro:\x20O\x20objeto\x20de\x20chat\x20não\x20está\x20inicializado.','toISOString','getGenerativeModel','Erro\x20interno:\x20ID\x20do\x20modelo\x20não\x20especificado.','Digite\x20um\x20nome\x20ou\x20ID\x20de\x20usuário\x20para\x20buscar.','):\x20Cota\x20da\x20API\x20excedida.\x20Não\x20é\x20possível\x20processar\x20mais\x20mensagens\x20no\x20momento.','\x20-\x20','flex','):\x20Cota\x20da\x20API\x20Gemini\x20excedida.','message-enter','\x27\x20não\x20encontrado.\x20Verifique\x20o\x20nome\x20ou\x20ID.','\x20px-4\x20py-3\x20max-w-[80%]\x20sm:max-w-[75%]\x20break-words\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20items-center\x20mb-1\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22font-medium\x22>Gemini</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22markdown-content\x22>','Falha\x20ao\x20inicializar\x20chat\x20(',')\x20salva\x20em\x20','falha','DOM\x20Carregado.\x20Iniciando\x20aplicação...','startChat','add','other','Salvando/Atualizando\x20usuário\x20no\x20Firebase:\x20ID=','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-xs\x20text-gray-500\x20mt-2\x22>','getDate','Erro:\x20Usuário\x20não\x20configurado\x20corretamente.','44458Zsburw','159HGRntm','Erro\x20desconhecido\x20na\x20API\x20Gemini.','Erro\x20ao\x20inicializar\x20Gemini\x20Chat\x20(','gradient-bg\x20text-white','chat-view-button-active','Usuário\x20\x27','<ol>','Resposta\x20do\x20Gemini\x20salva\x20no\x20Firebase:','isError','opacity-50','text-gray-700','<a\x20href=\x22$2\x22\x20target=\x22_blank\x22\x20rel=\x22noopener\x20noreferrer\x22\x20class=\x22text-indigo-600\x20hover:underline\x22>$1</a>','Usuário\x20com\x20ID\x20\x27','message-form','1080485760423','Online','Erro\x20ao\x20tentar\x20desanexar\x20listener\x20Firebase:','selected','</li>','Tentativa\x20de\x20chamar\x20getGeminiResponse\x20em\x20view\x20inválida:','Erro\x20ao\x20buscar\x20nome\x20\x27','getFullYear','connection-status','\x20mensagens.','__CB_','\x20mensagens\x20no\x20histórico.','gemini-1.5-flash-latest','Chave\x20da\x20API\x20Gemini\x20não\x20configurada!','button[type=\x22submit\x22]','Falha\x20(','Iniciando\x20atualizações\x20de\x20status\x20de\x20atividade','\x27\x20encontrado.\x20ID:\x20','match','gemini-1.5-','Iniciando\x20modelo:\x20','ID\x20do\x20modelo\x20não\x20fornecido\x20para\x20initGeminiChat.','Mensagem\x20de\x20erro\x20do\x20Gemini\x20salva\x20no\x20Firebase:','username-error','1153770PcbsDf','bg-blue-100\x20text-blue-900','Mensagem\x20inválida\x20ou\x20sem\x20timestamp\x20encontrada\x20no\x20histórico:','info','status-indicator','Desanexando\x20listener\x20Firebase\x20anterior\x20da\x20Ref:','g1.5-','Nome\x20de\x20usuário\x20encontrado\x20localmente:\x20','...</span>','innerHTML','erro','Erro\x20ao\x20verificar\x20usuário.\x20Tente\x20novamente.','&quot;','\x20mb-2\x20items-end\x20gap-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','...\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados.','trim','\x20Detalhes:\x20','bg-red-500','Erro\x20interno\x20ao\x20salvar\x20a\x20resposta.','Não\x20inicializando\x20objeto\x20de\x20chat\x20Gemini\x20para\x20view\x20\x27other\x27.','404','Resposta\x20recebida\x20de\x20Gemini\x20(','string','\x27\x20definido\x20e\x20salvo.','username-display','message','toggle','Outro\x20(','userChats/','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>','-latest','Visualizando\x20chat\x20de\x20outro\x20usuário...','gemini','Liberando\x20nome\x20inativo\x20','querySelector','\x27\x20não\x20encontrado\x20no\x20índice.','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','own','Erro\x20grave\x20ao\x20carregar\x20o\x20histórico\x20do\x20chat.','disabled','key',',\x20Nome=','warn','Mensagem\x20do\x20usuário\x20(','sendMessage','Não\x20é\x20possível\x20enviar\x20mensagens\x20nesta\x20visualização.','deviceId','Nenhum\x20histórico\x20encontrado\x20para\x20','once','1566042IVDNPw','Interface\x20inicializada.','justify-center','Chat\x20(','toUpperCase','toLowerCase','response','.\x20Verifique\x20as\x20Regras\x20de\x20Segurança\x20do\x20Firebase\x20Database.','Erro\x20crítico:\x20SDK\x20Gemini\x20não\x20disponível.','Erro\x20ao\x20inicializar\x20SDK\x20Gemini:','Quota','Reconectado\x20ao\x20Firebase.','&lt;','\x20mr-2\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','toLocaleTimeString','.initial-message','message-count','<div\x20class=\x22text-center\x20text-gray-500\x20py-10\x20initial-message\x22><i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x20text-3xl\x20sm:text-4xl\x20mb-2\x22></i><p\x20class=\x22text-sm\x20sm:text-base\x22>Carregando\x20mensagens...</p></div>','Offline','Erro\x20ao\x20verificar.\x20Tente\x20novamente.','text-indigo-200','Aguardando\x20configuração\x20inicial\x20do\x20usuário\x20antes\x20de\x20carregar\x20o\x20chat.','<div\x20class=\x22text-center\x20text-red-500\x20py-10\x20initial-message\x22><i\x20class=\x22fas\x20fa-user-slash\x20text-3xl\x20sm:text-4xl\x20mb-2\x22></i><p\x20class=\x22text-sm\x20sm:text-base\x22>Usuário\x20não\x20existe.</p></div>','blockReason','users/','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>','charAt','initializeApp','\x20mt-2\x20text-right\x22>','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>','1:1080485760423:web:8e4befd62dbf6106ff7a82','<em>$1</em>','general','):\x20Modelo\x20não\x20encontrado\x20(404).\x20Verifique\x20o\x20ID\x20do\x20modelo.','bg-green-100\x20text-green-800','Modal\x20de\x20boas-vindas\x20não\x20encontrado\x20no\x20DOM.','Erro\x20ao\x20enviar\x20sua\x20mensagem.\x20Verifique\x20sua\x20conexão\x20e\x20tente\x20novamente.','\x27,\x20Target=\x27','value','username-input','Aguardando\x20resposta\x20do\x20Gemini...','Listener\x20recebeu\x20snapshot\x20nulo:','.\x20A\x20funcionalidade\x20de\x20IA\x20pode\x20não\x20funcionar.','set','2-digit','<div\x20class=\x22text-center\x20text-gray-500\x20py-10\x20initial-message\x22><i\x20class=\x22fas\x20fa-search\x20text-3xl\x20sm:text-4xl\x20mb-2\x22></i><p\x20class=\x22text-sm\x20sm:text-base\x22>Digite\x20um\x20nome\x20ou\x20ID\x20acima\x20para\x20ver\x20o\x20chat.</p></div>','sistema','14753960prWmGT','justify-end','<div\x20class=\x22text-center\x20text-red-500\x20py-10\x22><p>Erro\x20ao\x20carregar\x20dados!\x20Verifique\x20as\x20permissões\x20ou\x20o\x20console\x20para\x20detalhes.</p></div>','</p></div>','replace','Meu','toString','ID\x20\x27','bg-yellow-100\x20text-yellow-800','<div\x20class=\x22text-center\x20text-gray-500\x20py-10\x20initial-message\x22><i\x20class=\x22fas\x20fa-user-clock\x20text-3xl\x20sm:text-4xl\x20mb-2\x22></i><p\x20class=\x22text-sm\x20sm:text-base\x22>Por\x20favor,\x20defina\x20seu\x20nome\x20de\x20usuário\x20primeiro.</p></div>','split','<li>','info-circle','getItem','exists','promptFeedback','update','ref','limitToLast','Erro\x20formatar\x20hora:','115927inDaMU','btn-other-chat','25QhFxah','gaamini-teste-api.appspot.com','Inicialização\x20do\x20Gemini\x20falhou\x20ou\x20referência\x20Firebase\x20inválida.\x20Listener\x20não\x20anexado.','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-bubble\x20user\x20','Iniciando\x20carregamento:\x20View=\x27','\x20/\x20','push','Meu\x20Chat\x20Pessoal','Status\x20Conexão\x20Firebase:','user-avatar','Erro\x20crítico:\x20SDK\x20Gemini\x20não\x20disponível\x20para\x20enviar\x20mensagem.','my-2','gaamini-teste-api.firebaseapp.com','319QoCmfl','justify-start','14TILtEx','device-id-display','Definida\x20nova\x20referência\x20Firebase\x20para:\x20','<i\x20class=\x22fas\x20fa-circle\x20mr-1\x20text-red-500\x22></i>\x20Desconectado','off','child_added','current-chat-info','Chat\x20Geral','placeholder','appendChild','textContent','O\x20chat\x20não\x20pôde\x20ser\x20iniciado\x20corretamente.\x20O\x20envio\x20de\x20mensagens\x20está\x20deshabilitado.','Não\x20inicializando\x20objeto\x20\x27chat\x27\x20para\x20a\x20view:','DOMContentLoaded','\x27,\x20Model=\x27','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-xs\x20'];_0x3d32=function(){return _0x464717;};return _0x3d32();}async function saveUserToFirebase(){const _0x476a06=_0x8d4032,_0x49173a=_0x12323b;if(!USER_DEVICE_ID||!USERNAME){console[_0x49173a(0x246)]('Tentativa\x20de\x20salvar\x20usuário\x20no\x20Firebase\x20sem\x20ID\x20ou\x20Nome.');return;}console[_0x49173a(0x233)](_0x49173a(0x277)+USER_DEVICE_ID+_0x476a06(0x179)+USERNAME);const _0x208bf2=database[_0x49173a(0x2f1)](_0x476a06(0x199)+USER_DEVICE_ID),_0x54239d=database[_0x49173a(0x2f1)](_0x49173a(0x255)+USERNAME);try{await _0x208bf2[_0x49173a(0x2e4)]({'username':USERNAME,'lastActive':firebase[_0x49173a(0x1f0)][_0x476a06(0xb3)][_0x49173a(0x327)]}),await _0x54239d[_0x476a06(0x1ac)](USER_DEVICE_ID),console[_0x49173a(0x233)](_0x49173a(0x2a2));}catch(_0x3793d1){console[_0x476a06(0xdc)](_0x49173a(0x1e1),_0x3793d1);}}function showWelcomeModal(){const _0xb2f4f8=_0x8d4032,_0x574dcc=_0x12323b;if(welcomeModal){welcomeModal[_0xb2f4f8(0x96)][_0x574dcc(0x308)](_0x574dcc(0x22d));if(usernameInput)usernameInput[_0x574dcc(0x329)]();}else console[_0x574dcc(0x246)](_0xb2f4f8(0x1a4));}function _0x2d35(_0x1428d5,_0x339cb8){const _0x3d32f2=_0x3d32();return _0x2d35=function(_0x2d3597,_0x3d38da){_0x2d3597=_0x2d3597-0x7c;let _0x26f8a8=_0x3d32f2[_0x2d3597];return _0x26f8a8;},_0x2d35(_0x1428d5,_0x339cb8);}async function handleSaveUsername(){const _0x46f25d=_0x8d4032,_0x5000c5=_0x12323b,_0x5db093=usernameInput[_0x5000c5(0x223)][_0x5000c5(0x221)]()[_0x5000c5(0x30a)]();usernameError[_0x5000c5(0x340)]='';if(_0x5db093[_0x5000c5(0x341)]<0x3||_0x5db093[_0x5000c5(0x341)]>0xf){usernameError['textContent']=_0x46f25d(0x94);return;}if(!/^[a-z0-9]+(?:[_-]?[a-z0-9]+)*$/i['test'](_0x5db093)){usernameError[_0x5000c5(0x340)]=_0x5000c5(0x1f3);return;}if(['admin',_0x5000c5(0x328),'geral',_0x46f25d(0x1af)]['includes'](_0x5db093)){usernameError[_0x5000c5(0x340)]=_0x46f25d(0x9c);return;}saveUsernameBtn[_0x5000c5(0x31e)]=!![],saveUsernameBtn[_0x46f25d(0x159)]=_0x5000c5(0x29f);try{const _0xf8ac47=await database[_0x5000c5(0x2f1)](_0x5000c5(0x255)+_0x5db093)[_0x5000c5(0x21e)](_0x46f25d(0x1a7)),_0x1c4265=_0xf8ac47[_0x5000c5(0x2f4)]();if(_0x1c4265&&_0x1c4265!==USER_DEVICE_ID){const _0x4cd4bc=database[_0x5000c5(0x2f1)](_0x5000c5(0x312)+_0x1c4265),_0x391025=await _0x4cd4bc[_0x46f25d(0x180)](_0x5000c5(0x223)),_0x248bab=_0x391025[_0x46f25d(0xd3)]();if(_0x248bab){const _0x134492=_0x248bab[_0x5000c5(0x1fa)]||0x0,_0x544e07=Date[_0x5000c5(0x30e)](),_0x40f45c=0x5*0x3c*0x3e8;if(_0x544e07-_0x134492<_0x40f45c){usernameError['textContent']=_0x5000c5(0x242),saveUsernameBtn[_0x46f25d(0x177)]=![],saveUsernameBtn[_0x46f25d(0x159)]=_0x5000c5(0x31c);return;}else console[_0x5000c5(0x233)](_0x5000c5(0x304)+_0x5db093+_0x5000c5(0x29c)+_0x1c4265),await database[_0x5000c5(0x2f1)](_0x5000c5(0x255)+_0x5db093)[_0x46f25d(0x1ac)](USER_DEVICE_ID),await _0x4cd4bc[_0x5000c5(0x2e4)]({'username':null});}}USERNAME=_0x5db093,localStorage[_0x5000c5(0x2d6)](_0x5000c5(0x2e7),USERNAME);if(welcomeModal)welcomeModal[_0x5000c5(0x2e3)][_0x5000c5(0x225)](_0x5000c5(0x22d));updateUserDisplay(),await saveUserToFirebase(),console[_0x46f25d(0xff)](_0x5000c5(0x26e)+USERNAME+_0x5000c5(0x2ea)),initialLoadComplete=!![],loadChatHistoryAndInit(),startActivityUpdates();}catch(_0x490a35){console[_0x5000c5(0x246)](_0x5000c5(0x2d1),_0x490a35),usernameError[_0x5000c5(0x340)]=_0x5000c5(0x1fb),saveUsernameBtn[_0x5000c5(0x31e)]=![],saveUsernameBtn[_0x5000c5(0x2b7)]=_0x5000c5(0x31c);}}function startActivityUpdates(){const _0x502be8=_0x8d4032,_0x2557f5=_0x12323b;console[_0x2557f5(0x233)](_0x502be8(0x148)),setInterval(async()=>{const _0x42fbb6=_0x502be8,_0x3d05d8=_0x2557f5;if(USER_DEVICE_ID&&USERNAME)try{await database['ref'](_0x3d05d8(0x312)+USER_DEVICE_ID)[_0x3d05d8(0x2e4)]({'lastActive':firebase[_0x3d05d8(0x1f0)][_0x42fbb6(0xb3)][_0x42fbb6(0x92)],'username':USERNAME});}catch(_0x4a2fc0){console[_0x3d05d8(0x246)](_0x3d05d8(0x326),_0x4a2fc0);}},0xea60);}async function setupUser(){const _0x114364=_0x8d4032,_0x3c9811=_0x12323b;USER_DEVICE_ID=getOrCreateDeviceId();const _0x2a6055=localStorage[_0x3c9811(0x1f5)](_0x114364(0x10c));updateUserDisplay(),!_0x2a6055?(console[_0x3c9811(0x233)](_0x3c9811(0x2d9)),showWelcomeModal()):(USERNAME=_0x2a6055,console[_0x3c9811(0x233)](_0x3c9811(0x23e)+USERNAME),updateUserDisplay(),await saveUserToFirebase(),initialLoadComplete=!![],loadChatHistoryAndInit(),startActivityUpdates());}async function initGeminiChat(_0x2f4c37=[],_0x38b884){const _0x5333e0=_0x8d4032,_0x5459dd=_0x12323b;chat=null;if(currentChatView!==_0x5459dd(0x25c)&&currentChatView!==_0x5459dd(0x27c))return console[_0x5459dd(0x233)](_0x5459dd(0x2e1),currentChatView),enableChatInput(![]),![];if(!genAI)return console[_0x5459dd(0x246)](_0x5459dd(0x2db)),appendSystemMessage(_0x5459dd(0x2a3),_0x5459dd(0x246)),![];if(!_0x38b884)return console[_0x5459dd(0x246)](_0x5459dd(0x311)),appendSystemMessage(_0x5459dd(0x2d5),_0x5459dd(0x246)),![];appendSystemMessage(_0x5459dd(0x28e)+currentChatView+_0x5459dd(0x267)+_0x38b884+_0x5459dd(0x32f)),enableChatInput(![]);try{console[_0x5459dd(0x233)](_0x5333e0(0x14c)+_0x38b884+',\x20view:\x20'+currentChatView);const _0x575ad6=genAI[_0x5459dd(0x1f1)]({'model':_0x38b884});return chat=_0x575ad6[_0x5459dd(0x1e2)]({'history':_0x2f4c37,'generationConfig':{'maxOutputTokens':0x7d0}}),console['log'](_0x5459dd(0x1e7)+_0x38b884+'\x20-\x20'+currentChatView+_0x5459dd(0x1f7)+_0x2f4c37['length']+_0x5333e0(0x143)),appendSystemMessage(_0x5459dd(0x1e7)+currentChatView+')\x20pronto.'),enableChatInput(!![]),!![];}catch(_0x5902d4){console[_0x5459dd(0x246)](_0x5333e0(0x12c)+_0x38b884+'\x20-\x20'+currentChatView+'):',_0x5902d4);let _0xbc31c0=_0x5459dd(0x23d)+currentChatView+_0x5459dd(0x267)+_0x38b884+'.';if(_0x5902d4[_0x5459dd(0x32d)]?.[_0x5459dd(0x212)](_0x5459dd(0x204)))_0xbc31c0=_0x5459dd(0x2b9)+_0x38b884+_0x5459dd(0x31a);else{if(_0x5902d4[_0x5333e0(0x169)]?.[_0x5459dd(0x212)](_0x5459dd(0x29d))||_0x5902d4[_0x5459dd(0x32d)]?.[_0x5459dd(0x212)]('Network\x20Error'))_0xbc31c0=_0x5459dd(0x2b9)+_0x38b884+_0x5333e0(0xc4);else{if(_0x5902d4[_0x5459dd(0x32d)]?.['includes'](_0x5459dd(0x2be)))_0xbc31c0=_0x5459dd(0x2b9)+_0x38b884+_0x5459dd(0x276);else{if(_0x5902d4[_0x5459dd(0x32d)]?.['includes'](_0x5459dd(0x283)))_0xbc31c0=_0x5459dd(0x2b9)+_0x38b884+'):\x20Requisição\x20inválida\x20(400).\x20Pode\x20ser\x20um\x20problema\x20no\x20histórico\x20ou\x20configuração.';else _0x5902d4[_0x5333e0(0x169)]?.[_0x5459dd(0x212)](_0x5459dd(0x2d4))||_0x5902d4[_0x5459dd(0x32d)]?.[_0x5459dd(0x212)](_0x5459dd(0x2ab))||_0x5902d4[_0x5459dd(0x32d)]?.[_0x5459dd(0x212)](_0x5459dd(0x30d))?_0xbc31c0=_0x5459dd(0x2b9)+_0x38b884+_0x5459dd(0x20a):_0xbc31c0=_0x5459dd(0x2b9)+_0x38b884+_0x5459dd(0x291)+(_0x5902d4[_0x5333e0(0x169)]||_0x5459dd(0x2a4));}}}return appendSystemMessage(_0xbc31c0,_0x5333e0(0xdc)),enableChatInput(![]),![];}}function appendMessage(_0x4337dd,_0xd7a0cb=!![],_0x22e85b=null){const _0x128f7b=_0x8d4032,_0x335346=_0x12323b;if(!_0x4337dd||typeof _0x4337dd[_0x335346(0x206)]!==_0x335346(0x272)||!chatMessages)return;const _0x5738df=chatMessages[_0x335346(0x1e6)](_0x335346(0x28d));if(_0x5738df)_0x5738df[_0x335346(0x308)]();const _0x3e2fc9=document[_0x335346(0x2a6)]('div');if(_0xd7a0cb)_0x3e2fc9[_0x335346(0x2e3)][_0x335346(0x225)](_0x335346(0x307));if(_0x22e85b)_0x3e2fc9['id']=_0x335346(0x1f9)+_0x22e85b;const _0x4cb678=_0x4337dd[_0x128f7b(0xf0)],_0x317ddd=_0x4337dd[_0x335346(0x2c2)]?formatTime(_0x4337dd[_0x335346(0x2c2)]):'',_0x5bf7ef=_0x4337dd[_0x335346(0x286)]||null;if(_0x4337dd[_0x335346(0x2d7)]===_0x335346(0x2d8)){const _0x35f7d5=_0x5bf7ef===USER_DEVICE_ID,_0x5440ac=_0x35f7d5?_0x128f7b(0x1b1):_0x335346(0x26f),_0x364b5d=_0x35f7d5?_0x335346(0x310):_0x335346(0x2ce),_0x29506e=!_0x35f7d5&&_0x5bf7ef&&(currentChatView===_0x335346(0x25c)||currentChatView===_0x335346(0x2a1)),_0x24db8c=_0x29506e?_0x335346(0x301)+_0x5bf7ef[_0x335346(0x1ee)](0x0,0x6)+_0x335346(0x21d):'';_0x3e2fc9[_0x335346(0x2b7)]=_0x335346(0x1fc)+_0x5440ac+_0x335346(0x2fd)+(!_0x35f7d5?_0x335346(0x338)+(_0x4337dd['username']?.[_0x335346(0x2ac)](0x0)[_0x128f7b(0x185)]()||'?')+_0x335346(0x2f9):'')+_0x335346(0x270)+_0x364b5d+_0x335346(0x231)+(_0x35f7d5?_0x335346(0x1ff):_0x4337dd[_0x128f7b(0x10c)]||_0x335346(0x2c7))+_0x335346(0x2c0)+_0x24db8c+_0x128f7b(0x16d)+escapeHtml(_0x4cb678)+_0x128f7b(0x85)+(_0x35f7d5?_0x335346(0x33c):_0x335346(0x2ef))+_0x128f7b(0x19d)+_0x317ddd+_0x335346(0x2f8)+(_0x35f7d5?_0x335346(0x338)+(USERNAME?.[_0x335346(0x2ac)](0x0)[_0x335346(0x279)]()||'?')+_0x335346(0x2f9):'')+_0x335346(0x31d);}else{const _0x23d6e6=formatMarkdown(_0x4cb678),_0x2f2e07=_0x4337dd[_0x335346(0x232)]||_0x4cb678[_0x335346(0x30a)]()[_0x128f7b(0xc1)](_0x335346(0x2bd))||_0x4cb678[_0x128f7b(0x186)]()[_0x335346(0x32b)](_0x335346(0x234))||_0x4cb678[_0x335346(0x30a)]()[_0x335346(0x32b)](_0x335346(0x2d3))||_0x4cb678[_0x335346(0x30a)]()[_0x335346(0x212)](_0x335346(0x339)),_0x284e2d=_0x2f2e07?_0x335346(0x2dc):_0x335346(0x2da);_0x3e2fc9[_0x335346(0x2b7)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20justify-start\x20mb-2\x20items-end\x20gap-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22bot-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-robot\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-bubble\x20'+_0x284e2d+_0x335346(0x26c)+_0x23d6e6+_0x335346(0x309)+_0x317ddd+_0x128f7b(0x19e);}chatMessages[_0x128f7b(0x7f)](_0x3e2fc9),scrollToBottom();}function appendSystemMessage(_0x22aa0b,_0x150db7=_0x12323b(0x30c)){const _0x8ac8da=_0x8d4032,_0x1757fb=_0x12323b;if(!chatMessages)return;const _0x4e2001=chatMessages['querySelector'](_0x1757fb(0x28d));if(_0x4e2001)_0x4e2001[_0x1757fb(0x308)]();const _0x5b5e76=document[_0x1757fb(0x2a6)](_0x1757fb(0x27a));_0x5b5e76[_0x1757fb(0x2e3)][_0x8ac8da(0x123)](_0x1757fb(0x307),_0x1757fb(0x333),_0x8ac8da(0x183),_0x1757fb(0x2b8));let _0x3e072c=_0x1757fb(0x284);if(_0x150db7===_0x1757fb(0x246))_0x3e072c=_0x1757fb(0x2dc);else _0x150db7===_0x1757fb(0x20f)&&(_0x3e072c=_0x8ac8da(0x1a3));_0x5b5e76[_0x1757fb(0x2b7)]=_0x1757fb(0x226)+_0x3e072c+_0x1757fb(0x2fb)+(_0x150db7===_0x8ac8da(0xdc)?_0x1757fb(0x209):_0x150db7===_0x1757fb(0x20f)?_0x1757fb(0x22b):_0x8ac8da(0x1bc))+_0x8ac8da(0x18e)+escapeHtml(_0x22aa0b)+_0x1757fb(0x215),chatMessages[_0x1757fb(0x2a7)](_0x5b5e76),scrollToBottom();}async function getGeminiResponse(_0x4e1374){const _0x589f75=_0x8d4032,_0x293ebd=_0x12323b;if(currentChatView!==_0x293ebd(0x25c)&&currentChatView!==_0x293ebd(0x27c)){console[_0x589f75(0x17a)](_0x293ebd(0x220),currentChatView);return;}if(!chat){console[_0x293ebd(0x246)](_0x293ebd(0x324)),appendSystemMessage(_0x293ebd(0x2b0),_0x293ebd(0x246)),enableChatInput(!![]);return;}if(!genAI){console[_0x589f75(0xdc)](_0x293ebd(0x2db)),appendSystemMessage(_0x293ebd(0x2a3),_0x293ebd(0x246)),enableChatInput(!![]);return;}isGeminiTyping=!![];if(typingIndicator)typingIndicator['classList'][_0x589f75(0xf8)](_0x589f75(0x9f));scrollToBottom();const _0x19e328=sanitizeForFirebasePath(currentModelId);if(!_0x19e328){console[_0x293ebd(0x246)](_0x589f75(0xfc)),appendSystemMessage(_0x293ebd(0x235),_0x293ebd(0x246)),isGeminiTyping=![];if(typingIndicator)typingIndicator[_0x293ebd(0x2e3)][_0x589f75(0x123)](_0x589f75(0x9f));enableChatInput(!![]);return;}let _0x43328c=null;if(currentChatView===_0x293ebd(0x25c))_0x43328c='generalChat/'+_0x19e328;else currentChatView===_0x293ebd(0x27c)&&USER_DEVICE_ID&&(_0x43328c=_0x589f75(0x16c)+USER_DEVICE_ID+'/'+_0x19e328);if(!_0x43328c){console[_0x293ebd(0x246)](_0x293ebd(0x238)),appendSystemMessage(_0x293ebd(0x25d),_0x293ebd(0x246)),isGeminiTyping=![];if(typingIndicator)typingIndicator[_0x293ebd(0x2e3)][_0x293ebd(0x225)](_0x293ebd(0x22d));enableChatInput(!![]);return;}try{console[_0x293ebd(0x233)]('Enviando\x20para\x20Gemini\x20('+currentModelId+'\x20-\x20'+currentChatView+'):',_0x4e1374);const _0x162d51=await chat[_0x293ebd(0x33f)](_0x4e1374),_0x26d3b8=await _0x162d51[_0x589f75(0x187)],_0x53277e=_0x26d3b8['text']();console[_0x293ebd(0x233)](_0x293ebd(0x1fe)+currentModelId+_0x589f75(0x118)+currentChatView+'):',_0x53277e);const _0x24269f=database[_0x293ebd(0x2f1)](_0x43328c)[_0x589f75(0x1cc)]();await _0x24269f[_0x293ebd(0x237)]({'text':_0x53277e,'sender':_0x293ebd(0x328),'timestamp':firebase[_0x589f75(0xa1)][_0x293ebd(0x336)][_0x293ebd(0x327)],'deviceId':null,'isError':![]}),console[_0x293ebd(0x233)](_0x293ebd(0x251),_0x24269f[_0x293ebd(0x31f)]);}catch(_0x44d364){console[_0x293ebd(0x246)](_0x293ebd(0x252)+currentModelId+_0x293ebd(0x2f0)+currentChatView+'):',_0x44d364);let _0x153548=_0x589f75(0xcf)+currentModelId+'.',_0x44420d=!![];if(_0x44d364[_0x293ebd(0x318)]?.['promptFeedback']?.[_0x293ebd(0x2ed)])_0x153548=_0x293ebd(0x2ba)+currentModelId+_0x293ebd(0x2c4)+_0x44d364[_0x293ebd(0x318)][_0x293ebd(0x2b5)][_0x293ebd(0x2ed)]+'.';else{if(_0x44d364[_0x293ebd(0x32d)]?.[_0x589f75(0xbe)](_0x293ebd(0x30d))||_0x44d364['message']?.[_0x293ebd(0x212)](_0x293ebd(0x2d4)))_0x153548=_0x293ebd(0x1e9)+currentModelId+_0x589f75(0x117);else{if(_0x44d364[_0x293ebd(0x32d)]?.[_0x293ebd(0x212)](_0x293ebd(0x204)))_0x153548=_0x293ebd(0x1e9)+currentModelId+_0x293ebd(0x2df),_0x44420d=![];else{if(_0x44d364[_0x293ebd(0x32d)]?.[_0x293ebd(0x212)](_0x293ebd(0x29d))||_0x44d364[_0x589f75(0x169)]?.[_0x293ebd(0x212)](_0x293ebd(0x22f)))_0x153548=_0x293ebd(0x32c)+currentModelId+_0x293ebd(0x337);else _0x44d364[_0x589f75(0x169)]&&(_0x153548=_0x293ebd(0x319)+currentModelId+_0x293ebd(0x291)+_0x44d364[_0x293ebd(0x32d)]);}}}const _0x1b7098=database[_0x293ebd(0x2f1)](_0x43328c)[_0x293ebd(0x23c)]();await _0x1b7098[_0x293ebd(0x237)]({'text':_0x153548,'sender':_0x293ebd(0x328),'timestamp':firebase[_0x293ebd(0x1f0)][_0x293ebd(0x336)][_0x293ebd(0x327)],'deviceId':null,'isError':!![]}),console['log'](_0x293ebd(0x297),_0x1b7098[_0x293ebd(0x31f)]);}finally{isGeminiTyping=![];if(typingIndicator)typingIndicator[_0x293ebd(0x2e3)][_0x589f75(0x123)]('hidden');enableChatInput(!![]);}}function enableChatInput(_0x11bc7c){const _0x48b141=_0x8d4032,_0x19e72b=_0x12323b,_0x1f18a8=statusText[_0x48b141(0x80)]===_0x19e72b(0x2d2),_0x3c8ae8=_0x11bc7c&&(currentChatView===_0x19e72b(0x25c)||currentChatView===_0x48b141(0x175))&&!!chat&&!isGeminiTyping&&_0x1f18a8;if(messageInput){messageInput[_0x19e72b(0x31e)]=!_0x3c8ae8,messageInput[_0x19e72b(0x2e3)][_0x19e72b(0x282)](_0x19e72b(0x2f2),!_0x3c8ae8),messageInput[_0x19e72b(0x2e3)][_0x19e72b(0x282)]('cursor-not-allowed',!_0x3c8ae8);if(!_0x1f18a8)messageInput[_0x19e72b(0x1eb)]=_0x48b141(0x89);else{if(currentChatView===_0x19e72b(0x2a1))messageInput[_0x48b141(0x7e)]=_0x19e72b(0x254);else{if(!chat&&(currentChatView===_0x48b141(0x1a1)||currentChatView===_0x19e72b(0x27c)))messageInput[_0x19e72b(0x1eb)]=_0x19e72b(0x24d);else{if(isGeminiTyping)messageInput[_0x19e72b(0x1eb)]=_0x19e72b(0x335);else!_0x3c8ae8?messageInput['placeholder']='Carregando\x20ou\x20indisponível...':messageInput[_0x19e72b(0x1eb)]=_0x19e72b(0x269);}}}}messageSubmitButton&&(messageSubmitButton[_0x19e72b(0x31e)]=!_0x3c8ae8,messageSubmitButton[_0x19e72b(0x2e3)][_0x19e72b(0x282)](_0x48b141(0x133),!_0x3c8ae8),messageSubmitButton[_0x19e72b(0x2e3)][_0x19e72b(0x282)](_0x19e72b(0x1ef),!_0x3c8ae8));}async function loadChatHistoryAndInit(){const _0x2ecc9d=_0x8d4032,_0x3182de=_0x12323b;if(!initialLoadComplete){console[_0x2ecc9d(0xff)](_0x3182de(0x2b2));if(chatMessages)chatMessages[_0x3182de(0x2b7)]=_0x3182de(0x2b1);return;}console[_0x3182de(0x233)](_0x3182de(0x2ca)+currentChatView+_0x3182de(0x2fc)+currentModelId+_0x2ecc9d(0x1a6)+(targetChatId||(currentChatView===_0x3182de(0x25c)?_0x3182de(0x27b):_0x3182de(0x239)))+'\x27'),enableChatInput(![]);if(chatMessages)chatMessages[_0x3182de(0x2b7)]=_0x3182de(0x244);messageCounter=0x0,updateMessageCountDisplay(),updateChatInfoLabel(),updateActiveButton();if(currentMessagesRef&&currentFirebaseListener){console[_0x3182de(0x233)](_0x3182de(0x2b6),currentMessagesRef[_0x3182de(0x293)]());try{currentMessagesRef[_0x3182de(0x2bf)](_0x3182de(0x2af),currentFirebaseListener),console[_0x3182de(0x233)](_0x3182de(0x2b4));}catch(_0x3781ab){console[_0x3182de(0x246)](_0x3182de(0x21a),_0x3781ab);}}else console[_0x2ecc9d(0xff)](_0x2ecc9d(0x99),currentMessagesRef,_0x3182de(0x2b3),typeof currentFirebaseListener);currentFirebaseListener=null,currentMessagesRef=null,chat=null,targetChatId=currentChatView===_0x3182de(0x2a1)?targetChatId:null;let _0x45371d=null;const _0x4e9298=sanitizeForFirebasePath(currentModelId);if(!_0x4e9298){const _0x432d33=_0x2ecc9d(0x91);console[_0x3182de(0x246)](_0x432d33),appendSystemMessage(_0x432d33,'error');if(chatMessages)chatMessages[_0x3182de(0x2b7)]=_0x3182de(0x200)+_0x432d33+_0x3182de(0x22a);return;}if(currentChatView===_0x3182de(0x25c))_0x45371d=_0x3182de(0x236)+_0x4e9298;else{if(currentChatView===_0x3182de(0x27c)&&USER_DEVICE_ID)_0x45371d=_0x3182de(0x332)+USER_DEVICE_ID+'/'+_0x4e9298;else{if(currentChatView===_0x3182de(0x2a1)){const _0x2c8307=userSearchInput[_0x3182de(0x223)][_0x3182de(0x221)]();if(!_0x2c8307){appendSystemMessage(_0x2ecc9d(0x97),_0x3182de(0x30c));if(chatMessages)chatMessages[_0x3182de(0x2b7)]=_0x2ecc9d(0x1ae);enableChatInput(![]);return;}appendSystemMessage(_0x3182de(0x2cf)+_0x2c8307+_0x3182de(0x32f),_0x3182de(0x30c));let _0x2e481f=null;if(!_0x2c8307[_0x3182de(0x32b)]('user-')){const _0x205422=_0x2c8307[_0x2ecc9d(0x186)]();try{const _0x59fb5a=await database[_0x3182de(0x2f1)](_0x3182de(0x255)+_0x205422)[_0x2ecc9d(0x180)](_0x3182de(0x223));_0x59fb5a[_0x2ecc9d(0x1be)]()?(_0x2e481f=_0x59fb5a[_0x3182de(0x2f4)](),console[_0x3182de(0x233)](_0x3182de(0x26e)+_0x2c8307+_0x3182de(0x278)+_0x2e481f)):console[_0x3182de(0x233)](_0x3182de(0x26e)+_0x2c8307+_0x3182de(0x257));}catch(_0x31258d){console[_0x3182de(0x246)](_0x2ecc9d(0xec),_0x31258d),appendSystemMessage(_0x3182de(0x2bb)+_0x2c8307+'\x27.',_0x3182de(0x246));}}if(!_0x2e481f){if(_0x2c8307[_0x3182de(0x32b)](_0x3182de(0x22c)))_0x2e481f=_0x2c8307,console[_0x3182de(0x233)](_0x2ecc9d(0x88)+_0x2c8307+_0x2ecc9d(0xd1));else{appendSystemMessage(_0x3182de(0x2de)+_0x2c8307+_0x2ecc9d(0x11c),_0x3182de(0x246));if(chatMessages)chatMessages[_0x3182de(0x2b7)]=_0x3182de(0x30b)+escapeHtml(_0x2c8307)+_0x3182de(0x2fe);enableChatInput(![]);return;}}if(_0x2e481f)try{const _0x1dc76d=await database[_0x3182de(0x2f1)](_0x3182de(0x312)+_0x2e481f)[_0x2ecc9d(0x180)](_0x3182de(0x223));if(!_0x1dc76d[_0x3182de(0x289)]()){console[_0x3182de(0x2c5)](_0x3182de(0x23a)+_0x2e481f+_0x3182de(0x243)),appendSystemMessage(_0x3182de(0x300)+_0x2e481f[_0x3182de(0x1ee)](0x0,0x8)+_0x2ecc9d(0x15e),_0x2ecc9d(0xdc));if(chatMessages)chatMessages[_0x3182de(0x2b7)]=_0x3182de(0x2a9);enableChatInput(![]);return;}else targetChatId=_0x2e481f,_0x45371d=_0x3182de(0x332)+targetChatId+'/'+_0x4e9298,console[_0x2ecc9d(0xff)]('Visualizando\x20chat\x20para\x20ID:\x20'+targetChatId),appendSystemMessage(_0x2ecc9d(0xa8)+targetChatId+'\x27.','info');}catch(_0x54ffd5){console['error'](_0x3182de(0x20d)+_0x2e481f+':',_0x54ffd5),appendSystemMessage(_0x3182de(0x285),_0x3182de(0x246)),enableChatInput(![]);return;}else{appendSystemMessage(_0x3182de(0x315)+_0x2c8307+'\x27.',_0x3182de(0x246));if(chatMessages)chatMessages[_0x3182de(0x2b7)]=_0x3182de(0x21f);enableChatInput(![]);return;}}}}if(!_0x45371d){const _0x693204=currentChatView===_0x3182de(0x27c)&&!USER_DEVICE_ID?_0x3182de(0x2aa):_0x3182de(0x2eb);console[_0x3182de(0x246)](_0x693204),appendSystemMessage(_0x693204,_0x2ecc9d(0xdc));if(chatMessages)chatMessages[_0x3182de(0x2b7)]=_0x3182de(0x200)+_0x693204+_0x3182de(0x22a);enableChatInput(![]);return;}currentMessagesRef=database[_0x3182de(0x2f1)](_0x45371d),console[_0x3182de(0x233)](_0x3182de(0x2f6)+_0x45371d);try{const _0x275119=await currentMessagesRef[_0x2ecc9d(0xf2)](_0x3182de(0x2c2))[_0x3182de(0x2a8)](0x32)[_0x2ecc9d(0x180)](_0x2ecc9d(0x1a7)),_0x1d39bf=_0x275119[_0x3182de(0x2f4)](),_0x378b7b=[];let _0x5978f2=0x0;if(chatMessages)chatMessages[_0x3182de(0x2b7)]='';if(_0x1d39bf){console[_0x3182de(0x233)](_0x3182de(0x264)+currentChatView+':\x20'+Object[_0x3182de(0x305)](_0x1d39bf)[_0x3182de(0x341)]+_0x2ecc9d(0x141));const _0xc776e4=Object[_0x3182de(0x305)](_0x1d39bf)[_0x2ecc9d(0xd7)]((_0x5e6ee6,_0x2a0909)=>_0x1d39bf[_0x5e6ee6][_0x3182de(0x2c2)]-_0x1d39bf[_0x2a0909]['timestamp']);_0xc776e4[_0x3182de(0x20b)](_0x28c47c=>{const _0xba06c1=_0x2ecc9d,_0x1da905=_0x3182de;messageCounter++;const _0xf83034=_0x1d39bf[_0x28c47c];if(_0xf83034&&_0xf83034['timestamp']){appendMessage(_0xf83034,![],_0x28c47c),_0x5978f2=Math[_0x1da905(0x266)](_0x5978f2,_0xf83034['timestamp']);if((currentChatView===_0x1da905(0x25c)||currentChatView===_0x1da905(0x27c))&&typeof _0xf83034[_0x1da905(0x206)]===_0x1da905(0x272)&&!_0xf83034[_0x1da905(0x232)]){const _0x3ef31a=_0xf83034[_0x1da905(0x2d7)]===_0xba06c1(0xeb)?_0x1da905(0x2d8):_0x1da905(0x268),_0x5fc88a=_0xf83034[_0x1da905(0x206)];_0x5fc88a[_0xba06c1(0x15f)]()?_0x378b7b[_0x1da905(0x23c)]({'role':_0x3ef31a,'parts':[{'text':_0x5fc88a}]}):console[_0xba06c1(0x17a)](_0x1da905(0x325),_0x28c47c);}}else console[_0xba06c1(0x17a)](_0x1da905(0x249),_0x28c47c,_0xf83034);});if(_0xc776e4[_0x3182de(0x341)]===0x0){if(chatMessages)chatMessages[_0x3182de(0x2b7)]=_0x3182de(0x273);}}else{console[_0x3182de(0x233)](_0x3182de(0x303)+_0x45371d+'.');if(chatMessages)chatMessages[_0x3182de(0x2b7)]=_0x3182de(0x273);}updateMessageCountDisplay(),scrollToBottom();let _0x11db37=![];currentChatView===_0x3182de(0x25c)||currentChatView===_0x2ecc9d(0x175)?_0x11db37=await initGeminiChat(_0x378b7b,currentModelId):(_0x11db37=!![],console[_0x3182de(0x233)](_0x3182de(0x26a)),enableChatInput(![]));if(_0x11db37&&currentMessagesRef){currentFirebaseListener=_0x26c54d=>{const _0x115af1=_0x2ecc9d,_0x4ae7b4=_0x3182de,_0x299577=_0x26c54d[_0x4ae7b4(0x2f4)](),_0x4bf712=_0x26c54d['key'];if(_0x299577&&!document[_0x4ae7b4(0x202)](_0x4ae7b4(0x1f9)+_0x4bf712))console[_0x115af1(0xff)](_0x4ae7b4(0x1f2)+currentChatView+'):',_0x4bf712),messageCounter++,appendMessage(_0x299577,!![],_0x4bf712),updateMessageCountDisplay();else!_0x299577&&console[_0x4ae7b4(0x2c5)](_0x4ae7b4(0x25f),_0x4bf712);};const _0x5b383f=_0x5978f2>0x0?_0x5978f2+0x1:Date['now']();currentMessagesRef[_0x2ecc9d(0xf2)](_0x3182de(0x2c2))[_0x3182de(0x2e6)](_0x5b383f)['on'](_0x2ecc9d(0x1da),currentFirebaseListener),console[_0x3182de(0x233)](_0x3182de(0x322)+_0x45371d+'\x20começando\x20em\x20'+new Date(_0x5b383f)[_0x2ecc9d(0x113)]()),currentChatView!==_0x2ecc9d(0x124)&&enableChatInput(_0x11db37);}else console[_0x3182de(0x2c5)](_0x3182de(0x250)),!_0x11db37&&(currentChatView===_0x2ecc9d(0x1a1)||currentChatView===_0x3182de(0x27c))&&appendSystemMessage(_0x3182de(0x227),_0x3182de(0x246)),enableChatInput(![]);}catch(_0x41a65e){console[_0x3182de(0x246)]('Erro\x20CRÍTICO\x20ao\x20carregar\x20histórico\x20ou\x20anexar\x20listener\x20para\x20'+_0x45371d+':',_0x41a65e);let _0x120e3b=_0x2ecc9d(0x176);_0x41a65e[_0x2ecc9d(0x169)]?.[_0x3182de(0x30a)]()[_0x3182de(0x212)](_0x3182de(0x25a))||_0x41a65e[_0x2ecc9d(0x10e)]?.[_0x3182de(0x30a)]()[_0x2ecc9d(0xbe)](_0x3182de(0x25a))?(_0x120e3b=_0x3182de(0x31b)+_0x45371d+_0x3182de(0x24f),currentChatView===_0x3182de(0x2a1)&&(_0x120e3b+=_0x2ecc9d(0xfe))):_0x120e3b+=_0x3182de(0x294)+_0x41a65e[_0x3182de(0x32d)],appendSystemMessage(_0x120e3b,_0x3182de(0x246));if(chatMessages)chatMessages[_0x3182de(0x2b7)]=_0x2ecc9d(0x1b2);enableChatInput(![]);}}function populateModelSelector(){const _0x133d69=_0x12323b;if(!modelSelect)return;modelSelect[_0x133d69(0x2b7)]='',AVAILABLE_MODELS['forEach'](_0x8279ca=>{const _0x37ed9c=_0x133d69,_0x42e0e7=document[_0x37ed9c(0x2a6)](_0x37ed9c(0x23f));_0x42e0e7['value']=_0x8279ca['id'],_0x42e0e7[_0x37ed9c(0x340)]=_0x8279ca[_0x37ed9c(0x260)],_0x8279ca['id']===currentModelId&&(_0x42e0e7[_0x37ed9c(0x1e8)]=!![]),modelSelect[_0x37ed9c(0x2a7)](_0x42e0e7);});}connectedRef['on'](_0x12323b(0x223),_0x7086a3=>{const _0x2fb3e5=_0x8d4032,_0x4c9366=_0x12323b,_0xac8001=_0x7086a3[_0x4c9366(0x2f4)]();console['log'](_0x4c9366(0x2ae),_0xac8001),statusIndicator&&(statusIndicator[_0x4c9366(0x2e3)][_0x4c9366(0x282)](_0x4c9366(0x224),_0xac8001),statusIndicator[_0x4c9366(0x2e3)][_0x2fb3e5(0x16a)](_0x4c9366(0x2c9),!_0xac8001),statusIndicator[_0x2fb3e5(0x96)][_0x2fb3e5(0x16a)](_0x2fb3e5(0xfa),!_0xac8001));if(statusText)statusText[_0x4c9366(0x340)]=_0xac8001?_0x4c9366(0x2d2):_0x4c9366(0x201);connectionStatus&&(connectionStatus[_0x4c9366(0x2b7)]=_0xac8001?_0x4c9366(0x245):_0x4c9366(0x24e)),enableChatInput(_0xac8001),!_0xac8001?appendSystemMessage(_0x4c9366(0x2cd),_0x4c9366(0x246)):console[_0x4c9366(0x233)](_0x2fb3e5(0x18c));}),modelSelect&&modelSelect[_0x12323b(0x2bc)](_0x12323b(0x32a),_0x584cac=>{const _0x56b7e4=_0x8d4032,_0x3e5bcf=_0x12323b,_0x437834=_0x584cac[_0x3e5bcf(0x2fa)][_0x3e5bcf(0x223)];_0x437834!==currentModelId&&(currentModelId=_0x437834,console[_0x3e5bcf(0x233)](_0x56b7e4(0xef)+currentModelId),loadChatHistoryAndInit());}),btnGeneralChat&&btnGeneralChat[_0x12323b(0x2bc)](_0x8d4032(0x87),()=>{const _0x45022a=_0x12323b;if(currentChatView!==_0x45022a(0x25c)){currentChatView=_0x45022a(0x25c),targetChatId=null;if(userSearchInput)userSearchInput[_0x45022a(0x223)]='';loadChatHistoryAndInit();}}),btnMyChat&&btnMyChat[_0x8d4032(0xf1)](_0x12323b(0x2f5),()=>{const _0x54f713=_0x8d4032,_0x3d55da=_0x12323b;if(!USER_DEVICE_ID){appendSystemMessage(_0x3d55da(0x265),_0x3d55da(0x246)),showWelcomeModal();return;}if(currentChatView!==_0x54f713(0x175)){currentChatView=_0x3d55da(0x27c),targetChatId=null;if(userSearchInput)userSearchInput[_0x3d55da(0x223)]='';loadChatHistoryAndInit();}}),btnOtherChat&&btnOtherChat[_0x8d4032(0xf1)]('click',()=>{const _0x4346ee=_0x8d4032,_0x1ceb2f=_0x12323b,_0x468e4d=userSearchInput[_0x1ceb2f(0x223)][_0x1ceb2f(0x221)]();if(!_0x468e4d){appendSystemMessage(_0x1ceb2f(0x2cc),_0x4346ee(0x153)),userSearchInput[_0x4346ee(0xa5)]();return;}currentChatView=_0x1ceb2f(0x2a1),loadChatHistoryAndInit();});function _0x2b27(){const _0x5912ed=_0x8d4032,_0x9294cf=['sender',_0x5912ed(0xeb),'Nenhum\x20nome\x20de\x20usuário\x20local\x20encontrado.\x20Mostrando\x20modal.','bg-gray-100\x20text-gray-800','SDK\x20Gemini\x20não\x20inicializado.','bg-red-100\x20text-red-800',_0x5912ed(0xb8),_0x5912ed(0x12f),'):\x20Chave\x20da\x20API\x20inválida.\x20Verifique\x20a\x20configuração.',_0x5912ed(0x10d),_0x5912ed(0x82),_0x5912ed(0x1d0),_0x5912ed(0x96),_0x5912ed(0x1c0),_0x5912ed(0x19f),_0x5912ed(0xe6),_0x5912ed(0x10c),_0x5912ed(0x1c3),'AIzaSyXXXXXXXXXXXXXXXXXXXXXXXXXX',_0x5912ed(0x167),_0x5912ed(0xe3),_0x5912ed(0x14f),_0x5912ed(0x198),_0x5912ed(0x121),_0x5912ed(0x98),_0x5912ed(0x118),_0x5912ed(0x1c1),'bg-gray-100','Você\x20não\x20pode\x20enviar\x20mensagens\x20no\x20chat\x20de\x20outro\x20usuário.',_0x5912ed(0xd3),'click',_0x5912ed(0x1d7),_0x5912ed(0x11f),_0x5912ed(0xb2),'</div>',_0x5912ed(0xf5),_0x5912ed(0xc8),_0x5912ed(0x84),_0x5912ed(0x15d),_0x5912ed(0xde),_0x5912ed(0x1b4),_0x5912ed(0x136),_0x5912ed(0xb5),_0x5912ed(0x7c),_0x5912ed(0x17f),_0x5912ed(0x171),_0x5912ed(0x8e),'Chat\x20de\x20',_0x5912ed(0x11b),_0x5912ed(0xf8),_0x5912ed(0x126),'toLowerCase',_0x5912ed(0xc7),_0x5912ed(0x153),_0x5912ed(0xe8),_0x5912ed(0xda),_0x5912ed(0x17d),_0x5912ed(0x12d),_0x5912ed(0x14d),_0x5912ed(0x199),_0x5912ed(0x1c5),_0x5912ed(0x12e),_0x5912ed(0x8d),_0x5912ed(0x128),_0x5912ed(0x15c),'response',_0x5912ed(0xd6),'):\x20Chave\x20da\x20API\x20Gemini\x20inválida\x20ou\x20expirada.\x20Verifique\x20a\x20chave\x20no\x20código.','Erro\x20de\x20Permissão\x20ao\x20acessar\x20','<i\x20class=\x22fas\x20fa-sign-in-alt\x20mr-2\x22></i>\x20Entrar\x20no\x20Chat',_0x5912ed(0xd8),_0x5912ed(0x177),'key',_0x5912ed(0xed),'gradient-bg',_0x5912ed(0xdf),_0x5912ed(0xcb),'Objeto\x20\x27chat\x27\x20não\x20inicializado\x20em\x20getGeminiResponse.','Mensagem\x20com\x20texto\x20vazio\x20encontrada\x20no\x20histórico,\x20pulando\x20para\x20Gemini:',_0x5912ed(0xa0),_0x5912ed(0x92),_0x5912ed(0x170),'focus',_0x5912ed(0xa2),_0x5912ed(0xc1),_0x5912ed(0xa4),_0x5912ed(0x169),_0x5912ed(0x101),_0x5912ed(0xac),_0x5912ed(0x13f),_0x5912ed(0xb7),_0x5912ed(0x16c),_0x5912ed(0x119),'join',_0x5912ed(0x1a9),_0x5912ed(0xb3),_0x5912ed(0xae),_0x5912ed(0xad),'não\x20foi\x20possível\x20processar',_0x5912ed(0x1a8),_0x5912ed(0x1d3),_0x5912ed(0x195),_0x5912ed(0x9e),_0x5912ed(0x146),_0x5912ed(0x17c),_0x5912ed(0x80),_0x5912ed(0x104),'Erro\x20ao\x20salvar\x20dados\x20do\x20usuário\x20no\x20Firebase:',_0x5912ed(0x122),'<p>',_0x5912ed(0x7d),_0x5912ed(0x127),_0x5912ed(0x172),_0x5912ed(0x184),_0x5912ed(0x13b),'Erro\x20(','map',_0x5912ed(0x7e),_0x5912ed(0xb9),_0x5912ed(0x8b),_0x5912ed(0xc6),_0x5912ed(0xf9),'database',_0x5912ed(0x114),_0x5912ed(0x111),_0x5912ed(0x90),_0x5912ed(0x140),_0x5912ed(0x1bd),_0x5912ed(0x105),')\x20inicializado\x20com\x20',_0x5912ed(0x14b),_0x5912ed(0x106),_0x5912ed(0xe2),_0x5912ed(0x194),_0x5912ed(0xd5),_0x5912ed(0x9d),_0x5912ed(0x165),'Você','<div\x20class=\x22text-center\x20text-red-500\x20py-10\x22><p>',_0x5912ed(0x193),_0x5912ed(0xd0),'model-select','API\x20key\x20not\x20valid',_0x5912ed(0x154),_0x5912ed(0xf0),_0x5912ed(0x1c7),_0x5912ed(0x1ad),_0x5912ed(0xc9),_0x5912ed(0x11a),_0x5912ed(0xf7),_0x5912ed(0x1bb),_0x5912ed(0xaf),'preventDefault',_0x5912ed(0x8f),'getTime',_0x5912ed(0x1cb),_0x5912ed(0xbe),_0x5912ed(0x18d),_0x5912ed(0xfb),_0x5912ed(0x19a),_0x5912ed(0x19c),'scrollTop',_0x5912ed(0x144),'Erro\x20ao\x20salvar\x20mensagem\x20do\x20usuário\x20no\x20Firebase:',_0x5912ed(0x13a),'querySelectorAll','<pre><code>',_0x5912ed(0x158),_0x5912ed(0x180),_0x5912ed(0xb1),_0x5912ed(0x13d),'trim',_0x5912ed(0x156),_0x5912ed(0x1a7),'bg-green-500','add','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22',_0x5912ed(0x81),_0x5912ed(0xb0),'Desconhecido',_0x5912ed(0x1b3),_0x5912ed(0x95),_0x5912ed(0xab),_0x5912ed(0x9f),_0x5912ed(0xa6),'Network\x20Error',_0x5912ed(0x1cf),_0x5912ed(0x100),_0x5912ed(0x132),'log',_0x5912ed(0x120),_0x5912ed(0xca),_0x5912ed(0xa3),'set','Não\x20foi\x20possível\x20determinar\x20o\x20caminho\x20para\x20salvar\x20a\x20resposta\x20do\x20Gemini.',_0x5912ed(0x1b5),_0x5912ed(0x1b7),_0x5912ed(0x1ab),'push',_0x5912ed(0x11e),_0x5912ed(0x157),'option',_0x5912ed(0x8a),_0x5912ed(0xc0),_0x5912ed(0xe7),_0x5912ed(0xee),_0x5912ed(0x192),_0x5912ed(0x10a),_0x5912ed(0xdc),_0x5912ed(0x86),'save-username-btn',_0x5912ed(0x152),_0x5912ed(0x1ba),_0x5912ed(0xd4),'keypress',_0x5912ed(0xe9),_0x5912ed(0x1d8),_0x5912ed(0x188),_0x5912ed(0x1c8),_0x5912ed(0x131),_0x5912ed(0xce),_0x5912ed(0xbc),_0x5912ed(0x16f),_0x5912ed(0xc3),_0x5912ed(0xb4),_0x5912ed(0x173),'Enter',_0x5912ed(0x18f),_0x5912ed(0xaa),'</p>',_0x5912ed(0x1a1),_0x5912ed(0x162),_0x5912ed(0xf3),_0x5912ed(0x1aa),'name',_0x5912ed(0xe5),'151370QnVlDw',_0x5912ed(0x137),_0x5912ed(0xbf),_0x5912ed(0x109),'max',_0x5912ed(0xa9),_0x5912ed(0xd9),'Digite\x20sua\x20mensagem...',_0x5912ed(0x163),_0x5912ed(0x182),_0x5912ed(0x11d),'Erro\x20interno:\x20Não\x20foi\x20possível\x20determinar\x20onde\x20salvar\x20sua\x20mensagem.',_0x5912ed(0x102),_0x5912ed(0x1d4),_0x5912ed(0x1c9),_0x5912ed(0x1a5),_0x5912ed(0x166),_0x5912ed(0x8c),_0x5912ed(0xf4),'G-VD9JE84V5N',_0x5912ed(0x1a2),_0x5912ed(0x125),_0x5912ed(0x149),'toUpperCase','div','Geral',_0x5912ed(0x175),_0x5912ed(0x1d5),_0x5912ed(0x103),'user-search-input',_0x5912ed(0x135),_0x5912ed(0x18a),'toggle','400',_0x5912ed(0x1b8),_0x5912ed(0x15b),_0x5912ed(0x17e),'<strong>$1</strong>',_0x5912ed(0x112),_0x5912ed(0x1be),'typing-indicator','</code>','filter',_0x5912ed(0x190),'Inicializando\x20chat\x20(',_0x5912ed(0x1d2),_0x5912ed(0x14a),_0x5912ed(0x9a),_0x5912ed(0x10f),_0x5912ed(0x1b6),_0x5912ed(0x160),'<ul>',_0x5912ed(0xdd),_0x5912ed(0x14e),'&gt;','...)',_0x5912ed(0x191),'text-gray-700',_0x5912ed(0xdb),_0x5912ed(0xd2),_0x5912ed(0x1cd),_0x5912ed(0xb6),_0x5912ed(0x1a0),_0x5912ed(0x124),_0x5912ed(0x107),_0x5912ed(0x189),_0x5912ed(0x12b),_0x5912ed(0x110),'createElement',_0x5912ed(0x7f),_0x5912ed(0x1c2),_0x5912ed(0x197),'Erro:\x20ID\x20do\x20dispositivo\x20do\x20usuário\x20não\x20definido\x20para\x20carregar\x20\x27Meu\x20Chat\x27.','quota',_0x5912ed(0x19b),'&#039;',_0x5912ed(0x1ce),'child_added',_0x5912ed(0xc5),_0x5912ed(0x1b9),_0x5912ed(0x196),'Listener:',_0x5912ed(0x108),_0x5912ed(0x1bf),_0x5912ed(0x155),_0x5912ed(0x159),_0x5912ed(0x1d1),_0x5912ed(0x147),_0x5912ed(0xf6),_0x5912ed(0x13e),'addEventListener',_0x5912ed(0x15a),_0x5912ed(0x164),_0x5912ed(0x1d9),_0x5912ed(0x174),_0x5912ed(0x13c),'timestamp',_0x5912ed(0xe0),'\x20devido\x20a:\x20',_0x5912ed(0x17a),'Gemini\x201.5\x20Flash','Usuário',_0x5912ed(0xe4),_0x5912ed(0x161),_0x5912ed(0x1ca),'Erro\x20crítico:\x20',_0x5912ed(0x116),_0x5912ed(0x9b),_0x5912ed(0x151),'Buscando\x20usuário:\x20',_0x5912ed(0xc2),'Erro\x20ao\x20verificar/salvar\x20nome\x20de\x20usuário:',_0x5912ed(0x139),'bloqueado',_0x5912ed(0x18b),_0x5912ed(0x115),'setItem'];return _0x2b27=function(){return _0x9294cf;},_0x2b27();}userSearchInput&&userSearchInput[_0x12323b(0x2bc)](_0x12323b(0x24c),_0x5c5067=>{const _0x45ba79=_0x12323b;_0x5c5067[_0x45ba79(0x31f)]===_0x45ba79(0x258)&&(_0x5c5067[_0x45ba79(0x20e)](),btnOtherChat[_0x45ba79(0x2f5)]());}),messageForm&&messageForm[_0x12323b(0x2bc)]('submit',async _0x5ec53f=>{const _0x428c40=_0x8d4032,_0x3975a5=_0x12323b;_0x5ec53f[_0x428c40(0xbd)]();const _0x1c056a=messageInput[_0x428c40(0x1a7)][_0x3975a5(0x221)]();if(!_0x1c056a)return;if(currentChatView===_0x3975a5(0x2a1)){appendSystemMessage(_0x3975a5(0x2f3),_0x3975a5(0x246));return;}if(currentChatView!==_0x428c40(0x1a1)&&currentChatView!==_0x3975a5(0x27c)){appendSystemMessage(_0x3975a5(0x30f),_0x428c40(0xdc));return;}if(!USER_DEVICE_ID||!USERNAME){appendSystemMessage(_0x3975a5(0x316),_0x3975a5(0x246)),showWelcomeModal();return;}if(!chat){appendSystemMessage(_0x3975a5(0x288),_0x3975a5(0x246));return;}if(!genAI){appendSystemMessage(_0x3975a5(0x2e2),_0x3975a5(0x246));return;}let _0xd4703a=null;const _0x3ec53d=sanitizeForFirebasePath(currentModelId);if(!_0x3ec53d){appendSystemMessage(_0x3975a5(0x214),_0x428c40(0xdc));return;}if(currentChatView===_0x3975a5(0x25c))_0xd4703a=_0x3975a5(0x236)+_0x3ec53d;else currentChatView===_0x428c40(0x175)&&(_0xd4703a=_0x3975a5(0x332)+USER_DEVICE_ID+'/'+_0x3ec53d);if(!_0xd4703a){appendSystemMessage(_0x3975a5(0x26d),_0x3975a5(0x246));return;}enableChatInput(![]);const _0x27bab0={'text':_0x1c056a,'sender':_0x3975a5(0x2d8),'timestamp':firebase[_0x3975a5(0x1f0)][_0x3975a5(0x336)][_0x3975a5(0x327)],'deviceId':USER_DEVICE_ID,'username':USERNAME},_0x528a5b=database[_0x3975a5(0x2f1)](_0xd4703a)[_0x3975a5(0x23c)]();try{await _0x528a5b[_0x3975a5(0x237)](_0x27bab0),console[_0x3975a5(0x233)](_0x428c40(0x17b)+USERNAME+'/'+USER_DEVICE_ID+_0x3975a5(0x2f7)+_0xd4703a+':',_0x528a5b[_0x428c40(0x178)]),messageInput[_0x428c40(0x1a7)]='',await getGeminiResponse(_0x1c056a);}catch(_0x2c4b40){console['error'](_0x3975a5(0x219),_0x2c4b40),appendSystemMessage(_0x3975a5(0x271),_0x3975a5(0x246)),enableChatInput(!![]);}finally{!messageInput[_0x3975a5(0x31e)]&&messageInput[_0x3975a5(0x329)]();}}),saveUsernameBtn&&saveUsernameBtn['addEventListener'](_0x12323b(0x2f5),handleSaveUsername),usernameInput&&usernameInput[_0x12323b(0x2bc)](_0x12323b(0x24c),_0x15893a=>{const _0x1c5cb7=_0x12323b;_0x15893a[_0x1c5cb7(0x31f)]===_0x1c5cb7(0x258)&&handleSaveUsername();}),window[_0x12323b(0x2bc)](_0x8d4032(0x83),()=>{const _0x23c2f=_0x8d4032,_0x17cb31=_0x12323b;console[_0x17cb31(0x233)](_0x17cb31(0x2ee)),populateModelSelector(),setupUser();if(messageInput)messageInput[_0x23c2f(0xa5)]();console[_0x17cb31(0x233)](_0x17cb31(0x26b));});
</script>

</body>
</html>
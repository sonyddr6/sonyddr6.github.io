<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat Multi-View V5 (Frontend Key - INSEGURO)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <style>
        /* Estilos CSS (incluindo user-id-tag e botão ativo) */
        html, body { height: 100%; overflow: hidden; }
        body { display: flex; flex-direction: column; }
        .main-container-wrapper { flex-grow: 1; overflow-y: auto; }
        .message-enter { animation: messageEnter 0.3s ease-out; }
        @keyframes messageEnter { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .typing-indicator::after { content: "..."; animation: typingDots 1.5s infinite; }
        @keyframes typingDots { 0%, 20% { content: "."; } 40% { content: ".."; } 60%, 100% { content: "..."; } }
        .markdown-content p { margin-bottom: 0.5rem; }
        .markdown-content ul, .markdown-content ol { margin-left: 1.25rem; list-style: inside; margin-bottom: 0.5rem; }
        .markdown-content li { margin-bottom: 0.25rem; }
        .markdown-content code { background-color: #e5e7eb; color: #1f2937; padding: 0.2rem 0.4rem; border-radius: 0.25rem; font-family: monospace; font-size: 0.9em; word-break: break-all; }
        .markdown-content pre { background-color: #e5e7eb; border: 1px solid #d1d5db; padding: 0.75rem; border-radius: 0.375rem; overflow-x: auto; margin-bottom: 0.75rem; }
        .markdown-content pre code { background-color: transparent; padding: 0; border-radius: 0; font-size: 0.85em; word-break: normal; }
        .markdown-content strong { font-weight: 600; }
        .markdown-content em { font-style: italic; }
        .markdown-content ul ul, .markdown-content ol ol, .markdown-content ul ol, .markdown-content ol ul { margin-left: 1.25rem; }
        .markdown-content a { color: #2563eb; text-decoration: underline; }
        .markdown-content a:hover { color: #1d4ed8; }
        .user-id-tag { font-size: 0.7rem; font-weight: bold; margin-left: 5px; padding: 1px 4px; background-color: #d1d5db; border-radius: 4px; color: #4b5563; }
        .chat-view-button-active { background-color: #4f46e5 !important; color: white !important; }
        .chat-view-button { background-color: #e5e7eb; color: #374151; transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out; }
        .chat-view-button:hover { background-color: #d1d5db; }
    </style>
</head>
<body class="bg-gray-100 font-sans">

<div class="main-container-wrapper container mx-auto max-w-4xl p-2 sm:p-4 flex flex-col h-full">

    <header class="bg-indigo-600 text-white rounded-lg shadow-md p-3 sm:p-4 mb-3 sm:mb-4 flex items-center justify-between flex-shrink-0">
        <div class="flex items-center space-x-2 sm:space-x-3">
            <i class="fas fa-robot text-xl sm:text-2xl"></i>
            <h1 class="text-lg sm:text-xl font-bold">Chat Gemini Multi-View</h1>
        </div>
        <div class="flex items-center space-x-4">
             <div id="user-info" class="text-xs">ID: <span id="device-id-display">Carregando...</span></div>
             <div id="user-status" class="flex items-center space-x-2">
                 <span id="status-indicator" class="h-3 w-3 rounded-full bg-gray-300"></span>
                 <span id="status-text" class="text-xs sm:text-sm">Offline</span>
             </div>
        </div>
    </header>

    <div class="mb-3 sm:mb-4 bg-white p-3 rounded-lg shadow-md flex-shrink-0 flex flex-col sm:flex-row gap-4">
        <div>
            <label for="model-select" class="block text-sm font-medium text-gray-700 mb-1">Modelo:</label>
            <select id="model-select" name="model-select" class="block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md border">
            </select>
        </div>
        <div>
             <label class="block text-sm font-medium text-gray-700 mb-1">Visualizar Chat:</label>
             <div class="flex flex-wrap gap-2">
                 <button id="btn-general-chat" class="chat-view-button chat-view-button-active px-3 py-1 rounded text-sm font-medium">Geral</button>
                 <button id="btn-my-chat" class="chat-view-button px-3 py-1 rounded text-sm font-medium">Meu Chat</button>
                 <div class="flex items-center gap-1">
                     <input type="text" id="other-user-id-input" placeholder="ID de outro usuário" class="px-2 py-1 border border-gray-300 rounded text-sm focus:ring-indigo-500 focus:border-indigo-500">
                     <button id="btn-other-chat" class="chat-view-button px-3 py-1 rounded text-sm font-medium">Ver Outro</button>
                 </div>
             </div>
             <p class="text-xs text-gray-500 mt-1" id="current-chat-info">Visualizando: Chat Geral</p>
        </div>
    </div>

    <div class="bg-white rounded-lg shadow-md overflow-hidden flex flex-col flex-grow min-h-0">
        <div id="chat-messages" class="p-3 sm:p-4 space-y-4 overflow-y-auto flex-grow min-h-0">
            <div class="text-center text-gray-500 py-10 initial-message">
                 <i class="fas fa-comments text-3xl sm:text-4xl mb-2"></i>
                 <p class="text-sm sm:text-base">Selecione um modelo e um chat para começar</p>
            </div>
        </div>
        <div id="typing-indicator" class="hidden bg-gray-100 px-3 sm:px-4 py-2 text-gray-500 text-xs sm:text-sm flex-shrink-0">
            <span class="typing-indicator">Gemini está digitando</span>
        </div>
        <div class="border-t border-gray-200 p-2 sm:p-4 bg-gray-50 flex-shrink-0">
            <form id="message-form" class="flex space-x-2">
                <input id="message-input" type="text" placeholder="Digite sua mensagem..." class="flex-1 px-4 py-2 rounded-full border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-sm sm:text-base" autocomplete="off" disabled>
                <button type="submit" aria-label="Enviar mensagem" class="bg-indigo-600 text-white px-3 sm:px-4 py-2 rounded-full hover:bg-indigo-700 transition-colors duration-200 flex items-center justify-center" disabled>
                    <i class="fas fa-paper-plane"></i>
                </button>
            </form>
            <div class="flex justify-between items-center mt-2 text-xs text-gray-500">
                <span id="connection-status">Conectando...</span>
                <span id="message-count">0 msgs</span>
            </div>
        </div>
    </div>
</div>

<script type="module">
    const _0x384425=_0x39a4;(function(_0x3a1047,_0x273b34){const _0x5b6241=_0x39a4,_0x47a671=_0x3a1047();while(!![]){try{const _0x2bfeb6=-parseInt(_0x5b6241(0x1cd))/0x1*(parseInt(_0x5b6241(0x168))/0x2)+parseInt(_0x5b6241(0xf5))/0x3+-parseInt(_0x5b6241(0x198))/0x4+parseInt(_0x5b6241(0x12c))/0x5+parseInt(_0x5b6241(0x19c))/0x6*(parseInt(_0x5b6241(0xe2))/0x7)+parseInt(_0x5b6241(0x16d))/0x8+parseInt(_0x5b6241(0x130))/0x9*(-parseInt(_0x5b6241(0x1c1))/0xa);if(_0x2bfeb6===_0x273b34)break;else _0x47a671['push'](_0x47a671['shift']());}catch(_0x31f8d9){_0x47a671['push'](_0x47a671['shift']());}}}(_0x2c10,0x722ff));const _0x250fab=_0x1f48;(function(_0x11fb93,_0x5d7e6f){const _0x5c21bf=_0x39a4,_0x3d00f6=_0x1f48,_0x3df38c=_0x11fb93();while(!![]){try{const _0x3eefc8=parseInt(_0x3d00f6(0x2d1))/0x1+parseInt(_0x3d00f6(0x254))/0x2*(-parseInt(_0x3d00f6(0x22e))/0x3)+parseInt(_0x3d00f6(0x252))/0x4+-parseInt(_0x3d00f6(0x2b1))/0x5+parseInt(_0x3d00f6(0x296))/0x6+parseInt(_0x3d00f6(0x28d))/0x7*(parseInt(_0x3d00f6(0x1e2))/0x8)+-parseInt(_0x3d00f6(0x28a))/0x9;if(_0x3eefc8===_0x5d7e6f)break;else _0x3df38c[_0x5c21bf(0x126)](_0x3df38c[_0x5c21bf(0x1c8)]());}catch(_0x5b7ee9){_0x3df38c['push'](_0x3df38c['shift']());}}}(_0x5132,0x4c4e1));import{GoogleGenerativeAI}from'https://esm.run/@google/generative-ai@latest';const firebaseConfig={'apiKey':_0x384425(0x111),'authDomain':_0x250fab(0x2a4),'projectId':_0x250fab(0x1fd),'storageBucket':_0x250fab(0x2bb),'messagingSenderId':'1080485760423','appId':_0x384425(0x129),'measurementId':_0x250fab(0x283)},GEMINI_API_KEY=_0x250fab(0x270),AVAILABLE_MODELS=[{'id':_0x250fab(0x297),'name':_0x250fab(0x233)}];let currentModelId=AVAILABLE_MODELS[0x0]['id'],currentChatView=_0x250fab(0x2a3),targetChatDeviceId=null,USER_DEVICE_ID=null,genAI,chat=null,currentMessagesListener=null,currentMessagesRef=null,currentFirebaseListener=null;try{firebase[_0x250fab(0x28b)](firebaseConfig);}catch(_0x3bea4a){console['error'](_0x250fab(0x294),_0x3bea4a),alert(_0x384425(0x104));}const database=firebase['database'](),connectedRef=firebase[_0x384425(0x139)]()[_0x250fab(0x242)](_0x250fab(0x2ce));try{if(!GEMINI_API_KEY||GEMINI_API_KEY===_0x250fab(0x232))throw new Error(_0x384425(0xc9));genAI=new GoogleGenerativeAI(GEMINI_API_KEY);}catch(_0x3406b7){console[_0x250fab(0x2ad)](_0x384425(0x184),_0x3406b7),alert(_0x250fab(0x1ea)+_0x3406b7[_0x250fab(0x2c0)]);}const messageForm=document[_0x250fab(0x236)]('message-form'),messageInput=document[_0x250fab(0x236)](_0x384425(0x136)),messageSubmitButton=messageForm[_0x250fab(0x1f1)](_0x384425(0x1a0)),chatMessages=document['getElementById'](_0x250fab(0x29c)),typingIndicator=document[_0x250fab(0x236)](_0x250fab(0x269)),statusIndicator=document[_0x250fab(0x236)]('status-indicator'),statusText=document[_0x250fab(0x236)]('status-text'),connectionStatus=document[_0x250fab(0x236)](_0x250fab(0x23b)),messageCount=document[_0x250fab(0x236)](_0x250fab(0x207)),modelSelect=document[_0x250fab(0x236)](_0x250fab(0x21c)),deviceIdDisplay=document[_0x250fab(0x236)](_0x384425(0x15c)),btnGeneralChat=document[_0x250fab(0x236)](_0x384425(0x1b6)),btnMyChat=document[_0x250fab(0x236)](_0x250fab(0x2bf)),btnOtherChat=document[_0x250fab(0x236)](_0x384425(0xe5)),otherUserIdInput=document[_0x250fab(0x236)](_0x384425(0x137)),currentChatInfo=document[_0x384425(0x153)](_0x250fab(0x2b6));let isGeminiTyping=![],messageCounter=0x0;function sanitizeForFirebasePath(_0x527609){const _0x1db4a2=_0x250fab;if(!_0x527609)return'';return _0x527609[_0x1db4a2(0x28e)](/[.#$[\]/]/g,'_');}function getOrCreateDeviceId(){const _0xbd964a=_0x384425,_0x257b6b=_0x250fab;let _0x3da92e=localStorage[_0x257b6b(0x2ca)](_0x257b6b(0x2d9));return!_0x3da92e&&(_0x3da92e=_0x257b6b(0x298)+Date[_0x257b6b(0x20e)]()+'-'+Math[_0xbd964a(0x146)]()[_0x257b6b(0x249)](0x24)[_0x257b6b(0x22b)](0x2,0xf),localStorage[_0x257b6b(0x2af)](_0x257b6b(0x2d9),_0x3da92e),console[_0x257b6b(0x2a0)](_0x257b6b(0x291),_0x3da92e),saveDeviceIdToFirebase(_0x3da92e)),console[_0x257b6b(0x2a0)](_0x257b6b(0x2a8),_0x3da92e),deviceIdDisplay[_0x257b6b(0x237)]=_0x3da92e[_0x257b6b(0x22b)](0x0,0x8)+_0xbd964a(0x179),_0x3da92e;}async function saveDeviceIdToFirebase(_0x4f0688){const _0x3a7a46=_0x384425,_0x24b139=_0x250fab;if(!_0x4f0688)return;const _0x23609a=database[_0x24b139(0x242)](_0x24b139(0x218)+_0x4f0688);try{const _0x5efbdd=await _0x23609a[_0x3a7a46(0xe8)](_0x24b139(0x2ba));!_0x5efbdd[_0x24b139(0x208)]()&&(await _0x23609a[_0x3a7a46(0x185)]({'c':firebase[_0x3a7a46(0x139)][_0x24b139(0x25f)][_0x24b139(0x2d4)]}),console[_0x24b139(0x2a0)](_0x24b139(0x2b3),_0x4f0688));}catch(_0x18e96f){console[_0x24b139(0x2ad)](_0x3a7a46(0x102),_0x18e96f);}}const escapeHtml=_0x589735=>{const _0x2e002a=_0x384425,_0x565d2a=_0x250fab;if(!_0x589735)return'';return _0x589735[_0x565d2a(0x28e)](/&/g,_0x2e002a(0xfc))[_0x2e002a(0x174)](/</g,_0x565d2a(0x1f7))[_0x565d2a(0x28e)](/>/g,_0x565d2a(0x22d))[_0x565d2a(0x28e)](/"/g,_0x565d2a(0x263))[_0x565d2a(0x28e)](/'/g,_0x2e002a(0x120));};function formatMarkdown(_0x7740b4){const _0x582367=_0x384425,_0xf4f249=_0x250fab;if(typeof _0x7740b4!==_0xf4f249(0x2c3))return'';let _0x1ae452=_0x7740b4[_0x582367(0x174)](/&/g,_0xf4f249(0x229))[_0xf4f249(0x28e)](/</g,_0xf4f249(0x1f7))[_0x582367(0x174)](/>/g,_0xf4f249(0x22d));const _0x2dd3f8={};let _0x117613=0x0;_0x1ae452=_0x1ae452[_0xf4f249(0x28e)](/```([\s\S]*?)```/gs,(_0x263cb0,_0x35b339)=>{const _0x494f3e=_0x582367,_0x3dca92=_0xf4f249,_0x5951a3=_0x3dca92(0x227)+_0x117613++ +'__';return _0x2dd3f8[_0x5951a3]=_0x494f3e(0x138)+escapeHtml(_0x35b339)+_0x3dca92(0x253),_0x5951a3;}),_0x1ae452=_0x1ae452[_0xf4f249(0x28e)](/\[([^\]]+)\]\(([^)]+)\)/g,_0x582367(0x186)),_0x1ae452=_0x1ae452[_0xf4f249(0x28e)](/\*\*(.*?)\*\*/g,_0xf4f249(0x26d)),_0x1ae452=_0x1ae452[_0xf4f249(0x28e)](/(?<!\*)\*(?!\*)(.*?)(?<!\*)\*(?!\*)/g,_0xf4f249(0x225)),_0x1ae452=_0x1ae452['replace'](/`([^`]+)`/g,(_0xae1a29,_0x4da998)=>_0xf4f249(0x2c1)+escapeHtml(_0x4da998)+_0xf4f249(0x299));const _0x3adb1f=_0x1ae452[_0xf4f249(0x224)]('\x0a');let _0x379d14=[],_0x416f00=null;_0x3adb1f[_0xf4f249(0x2a6)](_0x4bd960=>{const _0x174723=_0x582367,_0x3ed7ea=_0xf4f249,_0x4263fd=_0x4bd960['match'](/^(\s*)([-*+])\s+(.*)/),_0x394759=_0x4bd960[_0x3ed7ea(0x2b0)](/^(\s*)(\d+\.)\s+(.*)/);if(_0x4263fd){if(_0x416f00!=='ul'){if(_0x416f00)_0x379d14[_0x174723(0x126)]('</'+_0x416f00+'>');_0x379d14[_0x3ed7ea(0x25b)](_0x3ed7ea(0x210)),_0x416f00='ul';}_0x379d14[_0x3ed7ea(0x25b)](_0x3ed7ea(0x2d0)+_0x4263fd[0x3]+_0x3ed7ea(0x27d));}else{if(_0x394759){if(_0x416f00!=='ol'){if(_0x416f00)_0x379d14[_0x174723(0x126)]('</'+_0x416f00+'>');_0x379d14[_0x3ed7ea(0x25b)](_0x3ed7ea(0x264)),_0x416f00='ol';}_0x379d14[_0x3ed7ea(0x25b)](_0x3ed7ea(0x2d0)+_0x394759[0x3]+_0x174723(0x11e));}else _0x416f00&&(_0x379d14[_0x3ed7ea(0x25b)]('</'+_0x416f00+'>'),_0x416f00=null),_0x379d14[_0x3ed7ea(0x25b)](_0x4bd960);}}),_0x416f00&&_0x379d14[_0xf4f249(0x25b)]('</'+_0x416f00+'>'),_0x1ae452=_0x379d14[_0x582367(0x1c6)]('\x0a');for(const _0x44bc89 in _0x2dd3f8){_0x1ae452=_0x1ae452[_0x582367(0x174)](_0x44bc89,()=>_0x2dd3f8[_0x44bc89]);}const _0x227739=_0x1ae452[_0xf4f249(0x224)](/\n\s*\n/)[_0xf4f249(0x1ed)](_0x9790c0=>_0x9790c0[_0xf4f249(0x27b)]())[_0xf4f249(0x248)](_0x2290fd=>_0x2290fd)[_0xf4f249(0x1ed)](_0x1575c2=>{const _0x22894d=_0x582367,_0x9ff9f0=_0xf4f249;if(_0x1575c2[_0x9ff9f0(0x2b0)](/^<(ul|ol|pre|h[1-6])/))return _0x1575c2;return _0x9ff9f0(0x20b)+_0x1575c2[_0x22894d(0x174)](/\n/g,_0x22894d(0xcb))+_0x22894d(0x15a);})[_0xf4f249(0x266)]('');return _0x227739;}function formatTime(_0x5d1c04){const _0x177d7d=_0x384425,_0xbac070=_0x250fab;if(!_0x5d1c04||typeof _0x5d1c04!==_0xbac070(0x23e))return'';try{const _0x10882e=new Date(_0x5d1c04);if(isNaN(_0x10882e[_0xbac070(0x1ee)]()))return'';const _0x37a9a8=new Date(),_0x29fbca=_0x10882e[_0xbac070(0x244)]()===_0x37a9a8[_0xbac070(0x244)]()&&_0x10882e[_0xbac070(0x21b)]()===_0x37a9a8[_0xbac070(0x21b)]()&&_0x10882e[_0xbac070(0x290)]()===_0x37a9a8[_0xbac070(0x290)]();return _0x29fbca?_0x10882e[_0xbac070(0x281)]([],{'hour':_0xbac070(0x29d),'minute':_0xbac070(0x29d)}):_0x10882e[_0xbac070(0x281)]([],{'day':_0xbac070(0x29d),'month':_0x177d7d(0x162),'year':_0xbac070(0x29d),'hour':_0x177d7d(0x162),'minute':'2-digit'});}catch(_0x1e7da9){return console[_0xbac070(0x2ad)](_0xbac070(0x240),_0x1e7da9,_0x5d1c04),'';}}function scrollToBottom(){setTimeout(()=>{const _0x41f080=_0x39a4,_0x2b85c7=_0x1f48;chatMessages[_0x41f080(0x140)]=chatMessages[_0x2b85c7(0x204)];},0x64);}function _0x2c10(){const _0x1e4dea=['SDK\x20Gemini\x20n/\x20init.','bg-gray-100\x20sm:bg-gray-200\x20text-gray-800','-latest','Modelo:\x20','hidden','.initial-message','div','trim','AIzaSyBL7oI8tr3rseMyQW6ouPVwbfZKGUfwJ1s','Quota','child_added','includes','Erro\x20CRÍTICO\x20load\x20(','Erro\x20path\x20save\x20msg.','message-enter','...)','text-blue-300','fetch','info','</code></pre>','Erro:\x20Chat\x20obj\x20n/\x20init.','</li>','querySelectorAll','&#039;','\x20msgs\x20(','Msg\x20inválida\x20hist:','Nenhum\x20hist\x20','Erro:\x20SDK\x20Gemini\x20n/\x20init.','Erro\x20init\x20Gemini\x20(','push','bg-green-500','deviceId','1:1080485760423:web:8e4befd62dbf6106ff7a82','message','gemini-','2380075FfryKN','<li>','Erro:\x20ID\x20modelo\x20inválido\x20save\x20msg.',')\x20salva\x20','54PzsYkj','Nenhum\x20listener/ref\x20anterior\x20para\x20desanexar\x20(ou\x20um\x20deles\x20é\x20null).\x20Ref:','.chat-view-button','<span\x20class=\x22user-id-tag\x22\x20title=\x22','\x20rounded-r-lg\x20rounded-tl-lg\x20px-3\x20py-2\x20max-w-[80%]\x20sm:max-w-[75%]\x20break-words\x20text-sm\x20sm:text-base\x22><div\x20class=\x22markdown-content\x22>','initializeApp','message-input','other-user-id-input','<pre><code>','database','getMonth','user','sort','ID\x20modelo\x20inv\x20save\x20resp\x20G.','forEach','<ul>','scrollTop','__CB_','RESOURCE_EXHAUSTED','user-','Erro\x20ao\x20tentar\x20desanexar\x20listener:','gemini-1.5-flash-latest','random','Desculpe,','toISOString','Desconectado','text-indigo-200','ID\x20salvo\x20FB:','name','toString','DOM\x20Carregado.','\x20-\x20','Erro','Chat\x20n/\x20pôde\x20iniciar.','888636YJuWIK','getElementById','.info/connected','):\x20Req\x20inválida\x20(400).','toLocaleTimeString','current-chat-info','bg-indigo-600\x20text-white\x20rounded-l-lg\x20rounded-tr-lg','createElement','</p>','remove','device-id-display','key','Offline','click','warn','N/\x20pode\x20enviar\x20nesta\x20view.','2-digit','addEventListener','startAt','Erro\x20submit:','timestamp','Insira\x20ID\x20válido.','42cKJcbu','</p></div></div>','text','placeholder','2020052wfxoFY','5328800KKeidF','Visualizando\x20chat\x20de\x20outro\x20usuário...','\x27,\x20Model=\x27','<div\x20class=\x22text-center\x20text-gray-500\x20py-10\x22><p>Carregando...</p></div>','Online','Chat\x20n/\x20init\x20em\x20getGeminiResponse','length','replace','Lendo\x20chat\x20outro.\x20REGRAS\x20FIREBASE\x20DEVEM\x20PERMITIR!','blockReason','split','map','...','⚠️\x20Lembre-se:\x20Para\x20ver\x20o\x20chat\x20de\x20outro,\x20as\x20Regras\x20de\x20Segurança\x20do\x20Firebase\x20devem\x20permitir\x20leitura.','339290IyRycd','other','gaamini-teste-api.firebaseapp.com','\x27,\x20Target=\x27','Hist\x20','Falha','Use\x20\x27Meu\x20Chat\x27.','404','val','Erro\x20Gemini\x20Init:','set','<a\x20href=\x22$2\x22\x20target=\x22_blank\x22\x20rel=\x22noopener\x20noreferrer\x22\x20class=\x22text-blue-600\x20hover:underline\x22>$1</a>','<div\x20class=\x22text-center\x20text-gray-500\x20py-10\x20initial-message\x22><i\x20class=\x22fas\x20fa-comments\x20text-3xl\x20sm:text-4xl\x20mb-2\x22></i><p\x20class=\x22text-sm\x20sm:text-base\x22>Nenhuma\x20msg.</p></div>','400','chat-view-button','setItem','innerHTML','model','Erro:\x20ID\x20do\x20modelo\x20inválido\x20após\x20sanitização.','btn-my-chat','Erro\x20enviar\x20msg.','option','filter','Erro\x20hora:','9184hWOUKq','limitToLast','<em>$1</em>','\x20msgs.','Erro:\x20ID\x20modelo\x20n/\x20espec.','1370048bJJefW','bg-yellow-100\x20text-yellow-800','<ol>','number','6HCYkjC','Init\x20falhou/ref\x20DB\x20inv,\x20listener\x20off.','\x20px-3\x20py-2\x20max-w-[80%]\x20sm:max-w-[75%]\x20break-words\x20text-sm\x20sm:text-base\x22><p>','&quot;','button[type=\x22submit\x22]','):\x20Modelo\x20n/\x20encontrado\x20(404).','Bloqueado','Enviando\x20Gemini\x20(','.\x20Verifique\x20Regras\x20Segurança\x20DB.',')\x20pronto.','\x20view:\x20',')\x20init\x20c/\x20hist:','Visualizando:\x20','off','message-count','Erro\x20interno\x20save\x20resp.','Conectado\x20Firebase','Geral','N/\x20init\x20Chat\x20obj\x20p/\x20\x27other\x27.','Falha\x20(','Erro\x20Firebase:','>>>\x20Checking\x20listener\x20before\x20detach:','<div\x20class=\x22text-center\x20text-red-500\x20py-10\x22><p>Erro\x20load\x20dados!</p></div>','Skip\x20init\x20\x27chat\x27\x20for\x20view:','10zFlGpj','Falha\x20init\x20chat\x20(','btn-general-chat','error','\x20Regras\x20p/\x20/userChats/$userId\x20devem\x20permitir\x20leitura.','users/','string','Definida\x20Ref\x20FB\x20para:\x20','ID\x20disp\x20n/\x20def.','):\x20Chave\x20API\x20inválida.','toggle','Meu\x20Chat\x20Pessoal','scrollHeight','289990YpMzxV','9945amnYct','classList','focus','startsWith','join','gemini-1.5-','shift','DOMContentLoaded','msg-','TIMESTAMP','Resposta\x20Gemini\x20(','24819RdXQAQ','<div\x20class=\x22flex\x20justify-start\x22><div\x20class=\x22','userChats/','animate-pulse','change','\x20/\x20','):\x20Cota\x20API\x20excedida.','ref','Chave\x20API\x20Gemini\x20não\x20configurada!','bg-red-100\x20text-red-800','<br>','getTime','<div\x20class=\x22flex\x20justify-center\x20my-2\x22><div\x20class=\x22','</p><p\x20class=\x22text-xs\x20','Init\x20modelo:\x20','415720yhOUKG','log','Listener:','sendMessage','Gemini\x201.5\x20Flash','substring','bg-green-100\x20text-green-800','Carregando:\x20View=\x27','Chat\x20(','cursor-not-allowed','Network\x20Error','<div\x20class=\x22text-center\x20text-red-500\x20py-10\x22><p>','general','Erro:\x20ID\x20Disp\x20n/\x20def.','target','Desconhecido','Erro\x20com\x20','\x20@\x20','55818lqrjlu','Msg\x20user\x20(','orderByChild','btn-other-chat','...</span>','connection-status','once','Erro\x20rede\x20Gemini\x20(','gaamini-teste-api','FB\x20Conn:','userDeviceId','keys','gemini','Model\x20ID\x20n/\x20forn.','<code>','Limite','N/\x20pode\x20enviar\x20msg\x20chat\x20outro.','justify-start','7334937WsxnDl','1065981ZARxBh','typing-indicator','\x22><div\x20class=\x22','sender','querySelector','Novo\x20ID:','):\x20Erro\x20rede\x20Gemini.','&amp;','value','Digite\x20sua\x20mensagem...','generalChat/','chat-view-button-active','Listener\x20RT\x20off\x20p/\x20\x27other\x27.','Erro\x20salvar\x20ID:','Chat\x20Geral','Erro\x20Firebase\x20Config.','ServerValue','Erro\x20(','promptFeedback','own'];_0x2c10=function(){return _0x1e4dea;};return _0x2c10();}function updateMessageCountDisplay(){const _0x110248=_0x384425,_0x37385f=_0x250fab;let _0x1100f6=currentModelId[_0x37385f(0x28e)](_0x37385f(0x2b8),'')[_0x37385f(0x28e)](_0x37385f(0x1fc),_0x37385f(0x2bd))[_0x37385f(0x28e)](_0x37385f(0x223),'g-'),_0x1ddf4a='';if(currentChatView===_0x37385f(0x2a3))_0x1ddf4a=_0x37385f(0x259);else{if(currentChatView===_0x110248(0x108))_0x1ddf4a=_0x37385f(0x219);else{if(currentChatView===_0x110248(0x17c)&&targetChatDeviceId)_0x1ddf4a=_0x37385f(0x25e)+targetChatDeviceId[_0x37385f(0x22b)](0x0,0x6)+_0x37385f(0x1e9);else _0x1ddf4a='?';}}messageCount[_0x37385f(0x237)]=messageCounter+_0x37385f(0x2d5)+_0x1ddf4a+_0x110248(0xc6)+_0x1100f6+')';}function updateChatInfoLabel(){const _0x182fe2=_0x384425,_0x59c117=_0x250fab;let _0x57eb67=_0x59c117(0x2c4);if(currentChatView===_0x59c117(0x2a3))_0x57eb67+=_0x182fe2(0x103);else{if(currentChatView===_0x59c117(0x211))_0x57eb67+=_0x59c117(0x21d);else{if(currentChatView===_0x182fe2(0x17c)&&targetChatDeviceId)_0x57eb67+='Chat\x20de\x20'+targetChatDeviceId[_0x59c117(0x22b)](0x0,0x8)+_0x59c117(0x287);else _0x57eb67+=_0x59c117(0x212);}}currentChatInfo[_0x59c117(0x237)]=_0x57eb67;}function updateActiveButton(){const _0xd2d214=_0x384425,_0x49d23b=_0x250fab;document[_0x49d23b(0x23a)](_0xd2d214(0x132))[_0x49d23b(0x2a6)](_0x96a262=>{const _0x553c75=_0x49d23b;_0x96a262[_0x553c75(0x292)][_0x553c75(0x26f)](_0x553c75(0x2c8)),_0x96a262[_0x553c75(0x292)][_0x553c75(0x1f3)](_0x553c75(0x24f));});const _0x2cd42e=currentChatView===_0x49d23b(0x2a3)?_0x49d23b(0x1f0):currentChatView===_0x49d23b(0x211)?_0x49d23b(0x2bf):currentChatView===_0xd2d214(0x17c)?_0xd2d214(0xe5):null;if(_0x2cd42e){const _0x5bf9f8=document[_0x49d23b(0x236)](_0x2cd42e);_0x5bf9f8&&(_0x5bf9f8[_0x49d23b(0x292)][_0x49d23b(0x1f3)](_0xd2d214(0x100)),_0x5bf9f8[_0x49d23b(0x292)][_0x49d23b(0x26f)](_0x49d23b(0x24f)));}}function _0x1f48(_0x50a5be,_0x49cb74){const _0x3564e0=_0x5132();return _0x1f48=function(_0x1c69a3,_0x50168b){_0x1c69a3=_0x1c69a3-0x1dd;let _0x4801a6=_0x3564e0[_0x1c69a3];return _0x4801a6;},_0x1f48(_0x50a5be,_0x49cb74);}async function initGeminiChat(_0x525325=[],_0x98a3e5){const _0xff02b5=_0x384425,_0xc7b1de=_0x250fab;chat=null;if(currentChatView!==_0xc7b1de(0x2a3)&&currentChatView!==_0xc7b1de(0x211))return console[_0xc7b1de(0x2a0)](_0xff02b5(0x1b3),currentChatView),enableChatInput(![]),![];if(!genAI)return console[_0xff02b5(0x1b7)](_0xc7b1de(0x222)),appendSystemMessage(_0xff02b5(0x124),_0xc7b1de(0x2ad)),![];if(!_0x98a3e5)return console['error'](_0xff02b5(0xef)),appendSystemMessage(_0xc7b1de(0x230),_0xc7b1de(0x2ad)),![];appendSystemMessage(_0xc7b1de(0x2c9)+currentChatView+')\x20'+_0x98a3e5+_0xc7b1de(0x287)),enableChatInput(![]);try{console[_0xff02b5(0xd1)](_0xc7b1de(0x251)+_0x98a3e5+_0xff02b5(0x1a6)+currentChatView);const _0x177af7=genAI[_0xc7b1de(0x250)]({'model':_0x98a3e5});return chat=_0x177af7['startChat']({'history':_0x525325,'generationConfig':{'maxOutputTokens':0x7d0}}),console[_0xc7b1de(0x2a0)](_0xc7b1de(0x2a1)+_0x98a3e5+_0xc7b1de(0x2d6)+currentChatView+_0xff02b5(0x1a7),_0x525325[_0xc7b1de(0x1e6)]),appendSystemMessage(_0xc7b1de(0x2a1)+currentChatView+_0xff02b5(0x1a5)),enableChatInput(!![]),!![];}catch(_0x4f6ce6){console[_0xc7b1de(0x2ad)](_0xff02b5(0x125)+_0x98a3e5+_0xff02b5(0x14f)+currentChatView+'):',_0x4f6ce6);let _0x5dc81e=_0xc7b1de(0x2c5)+currentChatView+')\x20'+_0x98a3e5+'.';if(_0x4f6ce6[_0xc7b1de(0x2c0)]?.[_0xc7b1de(0x2d2)](_0xc7b1de(0x209)))_0x5dc81e=_0xc7b1de(0x2c7)+_0x98a3e5+_0xc7b1de(0x1e8);else{if(_0x4f6ce6[_0xc7b1de(0x2c0)]?.[_0xc7b1de(0x2d2)](_0xc7b1de(0x1ff)))_0x5dc81e=_0xc7b1de(0x2c7)+_0x98a3e5+_0xc7b1de(0x23d);else{if(_0x4f6ce6[_0xc7b1de(0x2c0)]?.[_0xc7b1de(0x2d2)](_0xff02b5(0x182)))_0x5dc81e=_0xc7b1de(0x2c7)+_0x98a3e5+_0xff02b5(0x1a1);else{if(_0x4f6ce6[_0xff02b5(0x12a)]?.[_0xc7b1de(0x2d2)](_0xc7b1de(0x267)))_0x5dc81e=_0xff02b5(0x1af)+_0x98a3e5+_0xc7b1de(0x1ef);else{if(_0x4f6ce6[_0xc7b1de(0x2c0)]?.[_0xc7b1de(0x2d2)](_0xff02b5(0x112))||_0x4f6ce6[_0xc7b1de(0x2c0)]?.[_0xc7b1de(0x2d2)](_0xc7b1de(0x27c)))_0x5dc81e=_0xff02b5(0x1af)+_0x98a3e5+_0xc7b1de(0x26c);else _0x5dc81e=_0xc7b1de(0x2c7)+_0x98a3e5+_0xc7b1de(0x268)+(_0x4f6ce6[_0xc7b1de(0x2c0)]||_0xc7b1de(0x2cf));}}}}return appendSystemMessage(_0x5dc81e,_0xc7b1de(0x2ad)),enableChatInput(![]),![];}}function appendMessage(_0x191ffd,_0x53e41f=!![],_0x142ba4=null){const _0x20b431=_0x384425,_0x3dd1bc=_0x250fab;if(!_0x191ffd||typeof _0x191ffd[_0x3dd1bc(0x246)]!==_0x3dd1bc(0x2c3))return;const _0x3134e4=chatMessages[_0x3dd1bc(0x1f1)](_0x3dd1bc(0x26e));if(_0x3134e4)_0x3134e4[_0x3dd1bc(0x26f)]();const _0x4e7e55=document[_0x3dd1bc(0x276)](_0x20b431(0x10f));if(_0x53e41f)_0x4e7e55[_0x3dd1bc(0x292)][_0x3dd1bc(0x1f3)](_0x3dd1bc(0x260));if(_0x142ba4)_0x4e7e55['id']=_0x20b431(0x1ca)+_0x142ba4;const _0x1bca41=_0x191ffd[_0x20b431(0x16a)],_0x2ac481=_0x191ffd[_0x20b431(0x166)]?formatTime(_0x191ffd[_0x20b431(0x166)]):'',_0x3ce42a=_0x191ffd[_0x3dd1bc(0x23c)]||null;if(_0x191ffd[_0x20b431(0xf8)]===_0x3dd1bc(0x284)){const _0x2865ae=_0x3ce42a===USER_DEVICE_ID,_0x142119=_0x2865ae?_0x3dd1bc(0x201):_0x3dd1bc(0x2c2),_0x510314=_0x2865ae?_0x3dd1bc(0x262):_0x3dd1bc(0x273),_0x1fad10=!_0x2865ae&&(currentChatView===_0x20b431(0xdc)||currentChatView==='other'),_0x4c025f=_0x1fad10&&_0x3ce42a?_0x3dd1bc(0x25d)+_0x3ce42a+'\x22>'+_0x3ce42a[_0x20b431(0xd5)](0x0,0x6)+_0x20b431(0xe6):'';_0x4e7e55[_0x20b431(0x18b)]=_0x3dd1bc(0x275)+_0x142119+_0x20b431(0xf7)+_0x510314+_0x3dd1bc(0x20f)+escapeHtml(_0x1bca41)+'\x20'+_0x4c025f+_0x20b431(0xce)+(_0x2865ae?_0x20b431(0x14a):_0x3dd1bc(0x215))+_0x3dd1bc(0x288)+_0x2ac481+_0x3dd1bc(0x2b5);}else{const _0x211480=formatMarkdown(_0x1bca41),_0x48b764=_0x1bca41[_0x20b431(0x1c5)](_0x3dd1bc(0x271))||_0x1bca41[_0x3dd1bc(0x286)](_0x20b431(0x150))||_0x1bca41[_0x20b431(0x1c5)](_0x20b431(0x180))||_0x1bca41[_0x3dd1bc(0x286)](_0x3dd1bc(0x1f8))||_0x1bca41[_0x20b431(0x1c5)](_0x3dd1bc(0x213)),_0x2a33f4=_0x48b764?_0x3dd1bc(0x1f9):_0x3dd1bc(0x2b7);_0x4e7e55[_0x3dd1bc(0x27f)]=_0x20b431(0x1ce)+_0x2a33f4+_0x3dd1bc(0x1eb)+_0x211480+'</div><p\x20class=\x22text-xs\x20text-gray-500\x20mt-1\x22>'+_0x2ac481+_0x3dd1bc(0x2b5);}chatMessages[_0x3dd1bc(0x2aa)](_0x4e7e55),scrollToBottom();}function appendSystemMessage(_0x235d09,_0x28e639=_0x250fab(0x21e)){const _0x348a1c=_0x384425,_0x4c186c=_0x250fab,_0x32a6d2=document[_0x4c186c(0x276)](_0x4c186c(0x1f5));_0x32a6d2[_0x348a1c(0x1c3)][_0x4c186c(0x1f3)](_0x348a1c(0x117));let _0x574240=_0x4c186c(0x239);if(_0x28e639===_0x348a1c(0x1b7))_0x574240=_0x4c186c(0x1f9);if(_0x28e639===_0x4c186c(0x29b))_0x574240=_0x348a1c(0xd6);_0x32a6d2['innerHTML']=_0x348a1c(0xcd)+_0x574240+_0x4c186c(0x2a2)+escapeHtml(_0x235d09)+'</p></div></div>',chatMessages[_0x4c186c(0x2aa)](_0x32a6d2),scrollToBottom();}function _0x39a4(_0x3794cf,_0x4c2b3f){const _0x2c1086=_0x2c10();return _0x39a4=function(_0x39a4c8,_0x5788bf){_0x39a4c8=_0x39a4c8-0xc6;let _0x1745e3=_0x2c1086[_0x39a4c8];return _0x1745e3;},_0x39a4(_0x3794cf,_0x4c2b3f);}async function getGeminiResponse(_0x3503e4){const _0x473c15=_0x384425,_0x171171=_0x250fab;if(currentChatView!==_0x171171(0x2a3)&&currentChatView!==_0x171171(0x211))return;if(!chat){console[_0x171171(0x2ad)](_0x171171(0x282));return;}isGeminiTyping=!![],typingIndicator[_0x171171(0x292)][_0x171171(0x26f)](_0x171171(0x2a5)),scrollToBottom();let _0x5bef6a=null;const _0x41c68c=sanitizeForFirebasePath(currentModelId);if(!_0x41c68c){console[_0x473c15(0x1b7)](_0x171171(0x1dd)),appendSystemMessage(_0x171171(0x205),_0x171171(0x2ad)),isGeminiTyping=![],typingIndicator[_0x171171(0x292)]['add'](_0x171171(0x2a5)),enableChatInput(!![]);return;}if(currentChatView===_0x171171(0x2a3))_0x5bef6a=_0x171171(0x234)+_0x41c68c;else currentChatView===_0x171171(0x211)&&USER_DEVICE_ID&&(_0x5bef6a='userChats/'+USER_DEVICE_ID+'/'+_0x41c68c);if(!_0x5bef6a){console[_0x473c15(0x1b7)]('N/\x20det\x20path\x20save\x20resp\x20G.'),appendSystemMessage(_0x171171(0x205),_0x171171(0x2ad)),isGeminiTyping=![],typingIndicator[_0x171171(0x292)][_0x171171(0x1f3)](_0x171171(0x2a5)),enableChatInput(!![]);return;}try{console[_0x171171(0x2a0)](_0x473c15(0x1a3)+currentModelId+_0x473c15(0x14f)+currentChatView+'):',_0x3503e4);const _0x12a7e9=await chat[_0x171171(0x226)](_0x3503e4),_0x344ad6=await _0x12a7e9[_0x171171(0x245)],_0x1acd51=_0x344ad6['text']();console['log'](_0x171171(0x2ac)+currentModelId+_0x473c15(0x14f)+currentChatView+'):',_0x1acd51);const _0x39d319=database[_0x171171(0x242)](_0x5bef6a)['push']();await _0x39d319[_0x171171(0x1de)]({'text':_0x1acd51,'sender':_0x171171(0x295),'timestamp':firebase[_0x473c15(0x139)][_0x171171(0x25f)][_0x171171(0x2d4)],'deviceId':null});}catch(_0x2cb30e){console[_0x171171(0x2ad)](_0x171171(0x1ec)+currentModelId+_0x473c15(0x14f)+currentChatView+'):',_0x2cb30e);let _0x4e0e05=_0x171171(0x1e5)+currentModelId+'.';if(_0x2cb30e[_0x171171(0x2c0)]?.[_0x473c15(0x114)](_0x171171(0x220)))_0x4e0e05=_0x171171(0x206)+currentModelId+_0x473c15(0xc7);else{if(_0x2cb30e['response']?.[_0x473c15(0x107)]?.[_0x171171(0x2a7)])_0x4e0e05=_0x171171(0x2cd)+currentModelId+_0x171171(0x268)+_0x2cb30e[_0x171171(0x245)][_0x171171(0x29f)][_0x171171(0x2a7)]+'.';else{if(_0x2cb30e[_0x171171(0x2c0)]?.[_0x171171(0x2d2)](_0x171171(0x1ff))||_0x2cb30e[_0x171171(0x2c0)]?.[_0x171171(0x2d2)](_0x473c15(0xda)))_0x4e0e05=_0x473c15(0xe9)+currentModelId+').';else{if(_0x2cb30e[_0x171171(0x2c0)]?.['includes'](_0x171171(0x209)))_0x4e0e05=_0x171171(0x206)+currentModelId+_0x171171(0x1e8);else{if(_0x2cb30e[_0x171171(0x2c0)])_0x4e0e05=_0x171171(0x1ec)+currentModelId+_0x171171(0x268)+_0x2cb30e[_0x171171(0x2c0)];}}}}const _0x4d813e=database[_0x473c15(0xc8)](_0x5bef6a)['push']();await _0x4d813e[_0x171171(0x1de)]({'text':_0x4e0e05,'sender':_0x171171(0x295),'timestamp':firebase['database'][_0x473c15(0x105)][_0x171171(0x2d4)],'deviceId':null,'isError':!![]});}finally{isGeminiTyping=![],typingIndicator[_0x171171(0x292)][_0x171171(0x1f3)]('hidden'),enableChatInput(!![]);}}function _0x5132(){const _0x36940f=_0x384425,_0x4a7760=[_0x36940f(0x126),_0x36940f(0x10c),_0x36940f(0x133),'Outro\x20(',_0x36940f(0x105),_0x36940f(0x117),_0x36940f(0x18f),_0x36940f(0x158),_0x36940f(0x19f),_0x36940f(0x19a),_0x36940f(0x139),_0x36940f(0x1c6),_0x36940f(0x188),'):\x20',_0x36940f(0xf6),_0x36940f(0x17e),_0x36940f(0x170),_0x36940f(0xc7),'<strong>$1</strong>',_0x36940f(0x10e),_0x36940f(0x15b),'AIzaSyDF5wOFJPEuhrlD9s0m1ZjYLg-IIPWsCRg',_0x36940f(0x147),'</p></div>','bg-blue-100\x20text-blue-900\x20rounded-r-lg\x20rounded-tl-lg','Conexão\x20perdida...','<div\x20class=\x22flex\x20',_0x36940f(0x159),_0x36940f(0x1d1),_0x36940f(0x1c4),_0x36940f(0x1c9),_0x36940f(0x148),_0x36940f(0x110),'quota','</li>',_0x36940f(0xe3),_0x36940f(0x18b),_0x36940f(0x16b),_0x36940f(0x156),_0x36940f(0x172),'G-VD9JE84V5N',_0x36940f(0x13b),_0x36940f(0x15d),'startsWith',_0x36940f(0x179),'\x20mt-1\x20text-right\x22>',_0x36940f(0x16f),_0x36940f(0xf4),_0x36940f(0x135),_0x36940f(0x144),_0x36940f(0x193),_0x36940f(0x174),'Listener\x20desanexado\x20com\x20sucesso.','getFullYear',_0x36940f(0xfa),_0x36940f(0x1c3),_0x36940f(0x165),_0x36940f(0x1b0),_0x36940f(0xee),_0x36940f(0x152),_0x36940f(0x145),_0x36940f(0x143),'</code>',_0x36940f(0x1ca),'success','chat-messages',_0x36940f(0x162),'selected',_0x36940f(0x107),_0x36940f(0xd1),_0x36940f(0xd8),'\x20rounded-xl\x20px-3\x20py-2\x20max-w-[90%]\x20sm:max-w-md\x20lg:max-w-lg\x20text-xs\x20sm:text-sm\x20text-center\x20system-message\x22><p>',_0x36940f(0xdc),_0x36940f(0x17d),_0x36940f(0x10d),_0x36940f(0x13e),_0x36940f(0x176),'Usando\x20ID:',_0x36940f(0x1b2),'appendChild',_0x36940f(0x161),_0x36940f(0x1cc),_0x36940f(0x1b7),_0x36940f(0x1bc),_0x36940f(0x18a),'match',_0x36940f(0xd0),'N/\x20determinou\x20caminho\x20chat.',_0x36940f(0x14b),_0x36940f(0x171),_0x36940f(0x169),_0x36940f(0x157),_0x36940f(0x10a),_0x36940f(0x10b),_0x36940f(0x166),_0x36940f(0xfd),'gaamini-teste-api.appspot.com',_0x36940f(0x190),'g1.5-',_0x36940f(0x19d),_0x36940f(0x18e),'message',_0x36940f(0xf0),_0x36940f(0xf3),'string',_0x36940f(0x1a8),_0x36940f(0x1b5),_0x36940f(0x167),'Falha\x20(','chat-view-button-active','Init\x20chat\x20(','getItem','toLowerCase','permission_denied','Bloqueado\x20(',_0x36940f(0x154),'Erro\x20desc.',_0x36940f(0x12d),_0x36940f(0x17b),_0x36940f(0x114),_0x36940f(0xe8),_0x36940f(0x1cb),_0x36940f(0x121),_0x36940f(0x14f),_0x36940f(0x17f),_0x36940f(0x1ac),_0x36940f(0xec),_0x36940f(0x13d),_0x36940f(0x185),'Erro\x20Permissão\x20',_0x36940f(0x17c),_0x36940f(0x1be),'1432NKgFcM',_0x36940f(0xe1),_0x36940f(0xf2),_0x36940f(0xe0),_0x36940f(0x173),_0x36940f(0xde),_0x36940f(0x1bd),_0x36940f(0x118),'Erro\x20Gemini:\x20',_0x36940f(0x134),'Erro\x20Gemini\x20(',_0x36940f(0x178),_0x36940f(0xcc),_0x36940f(0x155),_0x36940f(0x1b6),_0x36940f(0xf9),_0x36940f(0x1b1),'add',_0x36940f(0x123),'div',_0x36940f(0x16e),'&lt;',_0x36940f(0x1a2),_0x36940f(0xca),_0x36940f(0xdd),_0x36940f(0x160),_0x36940f(0x1c7),_0x36940f(0xea),_0x36940f(0x1cf),_0x36940f(0x11a),_0x36940f(0x183),'justify-end',_0x36940f(0x15e),_0x36940f(0x163),_0x36940f(0x1c0),_0x36940f(0x1ab),_0x36940f(0x106),_0x36940f(0x1aa),'exists','API\x20key\x20not\x20valid',_0x36940f(0x131),'<p>',_0x36940f(0x1a4),_0x36940f(0x12e),'now',_0x36940f(0x19e),_0x36940f(0x13f),_0x36940f(0x108),_0x36940f(0xdf),_0x36940f(0xf1),_0x36940f(0x149),_0x36940f(0x119),_0x36940f(0x14c),'disabled',_0x36940f(0x1b9),'Meu',_0x36940f(0xe4),_0x36940f(0x13a),'model-select',_0x36940f(0x1bf),_0x36940f(0x11b),_0x36940f(0x151),_0x36940f(0x142),_0x36940f(0x101),_0x36940f(0x109),_0x36940f(0x12b),_0x36940f(0x177),_0x36940f(0x195),_0x36940f(0xd3),_0x36940f(0x141),_0x36940f(0x18d),_0x36940f(0xfc),_0x36940f(0x11d),_0x36940f(0xd5),'Desanexando\x20listener\x20anterior\x20da\x20Ref:','&gt;',_0x36940f(0x1c2),_0x36940f(0x1b8),_0x36940f(0x197),'Listener\x20FB\x20anexado\x20on\x20','COLOQUE_SUA_CHAVE_API_GEMINI_AQUI',_0x36940f(0xd4),_0x36940f(0xff),_0x36940f(0x12f),'getElementById','textContent',_0x36940f(0x1a9),_0x36940f(0x199),_0x36940f(0x11f),_0x36940f(0xe7),_0x36940f(0x128),_0x36940f(0xfb),_0x36940f(0x19b),_0x36940f(0x113),_0x36940f(0x192),'Nova\x20msg\x20listener\x20(','ref','max','getDate','response',_0x36940f(0x16a),_0x36940f(0xeb),_0x36940f(0x191),_0x36940f(0x14d),_0x36940f(0x127),_0x36940f(0xf8),_0x36940f(0x187),_0x36940f(0xed),_0x36940f(0x15f),_0x36940f(0x189),'getGenerativeModel',_0x36940f(0xcf),_0x36940f(0x16c),_0x36940f(0x11c),_0x36940f(0x1b4),'submit',_0x36940f(0x1bb),_0x36940f(0xdb),_0x36940f(0x164),_0x36940f(0x1ad),_0x36940f(0x194)];return _0x5132=function(){return _0x4a7760;},_0x5132();}function enableChatInput(_0x208de7){const _0x485d8c=_0x384425,_0x1b1904=_0x250fab,_0x3c884c=_0x208de7&&(currentChatView===_0x1b1904(0x2a3)||currentChatView===_0x1b1904(0x211))&&!!chat&&!isGeminiTyping;messageInput[_0x1b1904(0x217)]=!_0x3c884c,messageSubmitButton[_0x1b1904(0x217)]=!_0x3c884c,messageInput[_0x1b1904(0x292)][_0x1b1904(0x1e1)]('bg-gray-100',!_0x3c884c),messageSubmitButton[_0x1b1904(0x292)][_0x1b1904(0x1e1)]('opacity-50',!_0x3c884c),messageSubmitButton[_0x1b1904(0x292)][_0x1b1904(0x1e1)](_0x485d8c(0xd9),!_0x3c884c),messageInput[_0x1b1904(0x280)]=currentChatView===_0x485d8c(0x17c)?_0x1b1904(0x1f6):_0x485d8c(0xfe);}async function loadChatHistoryAndInit(){const _0x26af51=_0x384425,_0x4632dc=_0x250fab;let _0x2b233b=null;if(currentChatView===_0x4632dc(0x211))_0x2b233b=USER_DEVICE_ID;else{if(currentChatView==='other')_0x2b233b=targetChatDeviceId;}console[_0x4632dc(0x2a0)](_0x26af51(0xd7)+currentChatView+_0x4632dc(0x289)+currentModelId+_0x4632dc(0x26a)+(_0x2b233b||_0x4632dc(0x259))+'\x27'),enableChatInput(![]),chatMessages[_0x4632dc(0x27f)]=_0x4632dc(0x26b),messageCounter=0x0,updateMessageCountDisplay(),updateChatInfoLabel(),updateActiveButton(),console[_0x4632dc(0x2a0)](_0x4632dc(0x1f2),typeof currentFirebaseListener,currentFirebaseListener);if(currentMessagesRef&&currentFirebaseListener){console[_0x26af51(0xd1)](_0x4632dc(0x22c),currentMessagesRef[_0x4632dc(0x249)]());try{currentMessagesRef[_0x4632dc(0x238)](_0x4632dc(0x23f),currentFirebaseListener),console[_0x26af51(0xd1)](_0x4632dc(0x28f));}catch(_0x140f36){console[_0x4632dc(0x2ad)](_0x4632dc(0x28c),_0x140f36);}}else console[_0x4632dc(0x2a0)](_0x4632dc(0x20a),currentMessagesRef,_0x26af51(0xd2),currentFirebaseListener);currentFirebaseListener=null,currentMessagesRef=null,chat=null;let _0x547671=null;const _0x4f11d0=sanitizeForFirebasePath(currentModelId);if(!_0x4f11d0){const _0x5ab208=_0x4632dc(0x228);console[_0x4632dc(0x2ad)](_0x5ab208),appendSystemMessage(_0x5ab208,_0x26af51(0x1b7)),chatMessages[_0x4632dc(0x27f)]=_0x4632dc(0x257)+_0x5ab208+_0x4632dc(0x272);return;}if(currentChatView===_0x26af51(0xdc))_0x547671=_0x26af51(0xff)+_0x4f11d0;else{if(currentChatView===_0x4632dc(0x211)&&USER_DEVICE_ID)_0x547671=_0x4632dc(0x1fe)+USER_DEVICE_ID+'/'+_0x4f11d0;else currentChatView===_0x26af51(0x17c)&&targetChatDeviceId&&(_0x547671='userChats/'+targetChatDeviceId+'/'+_0x4f11d0,console[_0x4632dc(0x1fb)](_0x26af51(0x175)),appendSystemMessage(_0x26af51(0x17a),_0x26af51(0x11b)));}if(!_0x547671){const _0x2a5555=_0x4632dc(0x2b2);console[_0x4632dc(0x2ad)](_0x2a5555),appendSystemMessage(_0x2a5555,_0x4632dc(0x2ad)),chatMessages[_0x4632dc(0x27f)]=_0x4632dc(0x257)+_0x2a5555+_0x4632dc(0x272),enableChatInput(![]);return;}currentMessagesRef=database['ref'](_0x547671),console[_0x4632dc(0x2a0)](_0x4632dc(0x256)+_0x547671);try{const _0x7cc6fc=await currentMessagesRef[_0x4632dc(0x21a)](_0x4632dc(0x2b9))[_0x4632dc(0x25a)](0x32)[_0x4632dc(0x2d3)](_0x4632dc(0x2ba)),_0x281dac=_0x7cc6fc[_0x4632dc(0x200)](),_0x2ba8d9=[];let _0x2686a4=0x0;chatMessages[_0x4632dc(0x27f)]='';if(_0x281dac){console[_0x4632dc(0x2a0)](_0x4632dc(0x2d7)+currentChatView+',\x20'+Object[_0x4632dc(0x24d)](_0x281dac)[_0x4632dc(0x1e6)]+_0x26af51(0x196));const _0x5adfaa=Object[_0x4632dc(0x24d)](_0x281dac);_0x5adfaa[_0x26af51(0x13c)]((_0x1e0bd8,_0x524576)=>_0x281dac[_0x1e0bd8][_0x4632dc(0x2b9)]-_0x281dac[_0x524576][_0x26af51(0x166)]),_0x5adfaa[_0x4632dc(0x2a6)](_0x402f5b=>{const _0x196617=_0x26af51,_0x3a850d=_0x4632dc;messageCounter++;const _0x43b0ae=_0x281dac[_0x402f5b];if(_0x43b0ae&&_0x43b0ae[_0x3a850d(0x2b9)]){appendMessage(_0x43b0ae,![],_0x402f5b);if(currentChatView===_0x3a850d(0x2a3)||currentChatView===_0x196617(0x108)){const _0x2bfba7=_0x43b0ae[_0x3a850d(0x24b)]===_0x196617(0x13b)?_0x3a850d(0x284):_0x196617(0x18c),_0x26e369=typeof _0x43b0ae[_0x3a850d(0x246)]===_0x196617(0x1ba)?_0x43b0ae[_0x3a850d(0x246)]:'';if(_0x26e369&&!(_0x26e369[_0x3a850d(0x286)]('Desculpe,')||_0x26e369[_0x196617(0x1c5)](_0x196617(0x150))))_0x2ba8d9[_0x3a850d(0x25b)]({'role':_0x2bfba7,'parts':[{'text':_0x26e369}]});}_0x2686a4=Math[_0x3a850d(0x243)](_0x2686a4,_0x43b0ae[_0x3a850d(0x2b9)]);}else console[_0x3a850d(0x1fb)](_0x196617(0x122),_0x402f5b,_0x43b0ae);});if(_0x5adfaa[_0x4632dc(0x1e6)]===0x0)chatMessages[_0x4632dc(0x27f)]=_0x4632dc(0x24c);}else console[_0x4632dc(0x2a0)](_0x4632dc(0x1f4)+_0x547671+'.'),chatMessages[_0x4632dc(0x27f)]=_0x4632dc(0x24c);updateMessageCountDisplay(),scrollToBottom();let _0x197ae=![];currentChatView===_0x4632dc(0x2a3)||currentChatView===_0x4632dc(0x211)?_0x197ae=await initGeminiChat(_0x2ba8d9,currentModelId):(_0x197ae=!![],console[_0x4632dc(0x2a0)](_0x26af51(0x1ae)),enableChatInput(![]));if(_0x197ae&&currentMessagesRef&&(currentChatView===_0x4632dc(0x2a3)||currentChatView===_0x4632dc(0x211))){currentFirebaseListener=_0x34b2a8=>{const _0x479a4d=_0x4632dc,_0x1d3804=_0x34b2a8[_0x479a4d(0x200)](),_0x43f4da=_0x34b2a8[_0x479a4d(0x285)];_0x1d3804&&!document[_0x479a4d(0x236)](_0x479a4d(0x29a)+_0x43f4da)&&(console[_0x479a4d(0x2a0)](_0x479a4d(0x241)+currentChatView+'):',_0x43f4da),messageCounter++,appendMessage(_0x1d3804,!![],_0x43f4da),updateMessageCountDisplay());};const _0x357c4f=_0x2686a4>0x0?_0x2686a4+0x1:Date[_0x4632dc(0x20e)]();currentMessagesRef[_0x4632dc(0x21a)](_0x4632dc(0x2b9))[_0x4632dc(0x258)](_0x357c4f)['on'](_0x4632dc(0x23f),currentFirebaseListener),console[_0x4632dc(0x2a0)](_0x4632dc(0x231)+_0x547671+_0x4632dc(0x1e3)+new Date(_0x357c4f)[_0x4632dc(0x27a)]());}else{if(currentChatView===_0x4632dc(0x1e0))console['log'](_0x4632dc(0x221));else{console[_0x4632dc(0x1fb)](_0x4632dc(0x2be));if(!_0x197ae&&(currentChatView===_0x4632dc(0x2a3)||currentChatView===_0x4632dc(0x211)))appendSystemMessage(_0x4632dc(0x21f),_0x4632dc(0x2ad));enableChatInput(![]);}}}catch(_0x50cfd7){console[_0x26af51(0x1b7)](_0x26af51(0x115)+_0x547671+'):',_0x50cfd7);let _0x3e30b7='Erro\x20grave\x20hist.';if(_0x50cfd7[_0x26af51(0x12a)]?.[_0x4632dc(0x2cb)]()[_0x4632dc(0x2d2)](_0x4632dc(0x2cc))){_0x3e30b7=_0x4632dc(0x1df)+_0x547671+_0x4632dc(0x20c);if(currentChatView===_0x26af51(0x17c))_0x3e30b7+=_0x4632dc(0x22f);}else _0x3e30b7+='\x20'+_0x50cfd7[_0x4632dc(0x2c0)];appendSystemMessage(_0x3e30b7,_0x4632dc(0x2ad)),chatMessages[_0x4632dc(0x27f)]=_0x4632dc(0x2a9),enableChatInput(![]);}}function populateModelSelector(){const _0x288237=_0x250fab;AVAILABLE_MODELS[_0x288237(0x2a6)](_0x48a8e5=>{const _0x4a5e54=_0x39a4,_0x357b0e=_0x288237,_0x197e25=document[_0x4a5e54(0x159)](_0x357b0e(0x2bc));_0x197e25[_0x4a5e54(0xfd)]=_0x48a8e5['id'],_0x197e25[_0x357b0e(0x237)]=_0x48a8e5[_0x357b0e(0x216)];if(_0x48a8e5['id']===currentModelId)_0x197e25[_0x357b0e(0x29e)]=!![];modelSelect[_0x357b0e(0x2aa)](_0x197e25);});}connectedRef['on'](_0x250fab(0x2ba),_0x2a24bd=>{const _0x5e473d=_0x384425,_0x4f877c=_0x250fab,_0x35c8e0=_0x2a24bd[_0x4f877c(0x200)]();console[_0x4f877c(0x2a0)](_0x4f877c(0x247),_0x35c8e0),statusIndicator[_0x4f877c(0x292)][_0x5e473d(0x1be)](_0x4f877c(0x24a),_0x35c8e0),statusIndicator[_0x4f877c(0x292)][_0x5e473d(0x1be)]('bg-red-500',!_0x35c8e0),statusIndicator[_0x4f877c(0x292)]['toggle'](_0x5e473d(0x1d0),!_0x35c8e0),statusText[_0x4f877c(0x237)]=_0x35c8e0?_0x4f877c(0x2b4):_0x4f877c(0x202),connectionStatus[_0x4f877c(0x237)]=_0x35c8e0?_0x4f877c(0x2d8):_0x4f877c(0x214),enableChatInput(_0x35c8e0);if(!_0x35c8e0)appendSystemMessage(_0x4f877c(0x274));}),modelSelect[_0x250fab(0x203)](_0x250fab(0x277),_0x31b108=>{const _0x3d80f4=_0x250fab;currentModelId=_0x31b108[_0x3d80f4(0x1e7)]['value'],console[_0x3d80f4(0x2a0)](_0x3d80f4(0x25c)+currentModelId),loadChatHistoryAndInit();}),btnGeneralChat[_0x250fab(0x203)](_0x250fab(0x24e),()=>{const _0xb2566c=_0x250fab;currentChatView=_0xb2566c(0x2a3),targetChatDeviceId=null,otherUserIdInput[_0xb2566c(0x2ba)]='',loadChatHistoryAndInit();}),btnMyChat[_0x250fab(0x203)](_0x250fab(0x24e),()=>{const _0x3556ed=_0x384425,_0x532441=_0x250fab;if(!USER_DEVICE_ID){appendSystemMessage(_0x532441(0x2ae),_0x532441(0x2ad));return;}currentChatView=_0x532441(0x211),targetChatDeviceId=null,otherUserIdInput[_0x3556ed(0xfd)]='',loadChatHistoryAndInit();}),btnOtherChat[_0x250fab(0x203)](_0x250fab(0x24e),()=>{const _0x29bea3=_0x384425,_0x204ff4=_0x250fab;if(!USER_DEVICE_ID){appendSystemMessage(_0x204ff4(0x2ae),_0x29bea3(0x1b7));return;}const _0x2817dc=otherUserIdInput[_0x204ff4(0x2ba)][_0x204ff4(0x27b)]();if(_0x2817dc&&_0x2817dc!==USER_DEVICE_ID)currentChatView=_0x29bea3(0x17c),targetChatDeviceId=_0x2817dc,loadChatHistoryAndInit();else _0x2817dc===USER_DEVICE_ID?appendSystemMessage(_0x29bea3(0x181),_0x29bea3(0x11b)):appendSystemMessage(_0x204ff4(0x2c6),_0x29bea3(0x1b7));}),messageForm[_0x250fab(0x203)](_0x250fab(0x255),async _0x1565c0=>{const _0x53fc10=_0x384425,_0x414d91=_0x250fab;_0x1565c0['preventDefault']();const _0x16f2ce=messageInput[_0x414d91(0x2ba)][_0x414d91(0x27b)]();if(!_0x16f2ce)return;if(currentChatView===_0x414d91(0x1e0)){appendSystemMessage(_0x414d91(0x1e4),_0x414d91(0x2ad));return;}if(currentChatView!==_0x53fc10(0xdc)&&currentChatView!==_0x414d91(0x211)){appendSystemMessage(_0x414d91(0x2ab),'error');return;}if(!USER_DEVICE_ID){appendSystemMessage(_0x414d91(0x1fa),'error');return;}if(!chat){appendSystemMessage(_0x414d91(0x22a),_0x414d91(0x2ad));return;}let _0x1ba394=null;const _0x48cb54=sanitizeForFirebasePath(currentModelId);if(!_0x48cb54){appendSystemMessage(_0x414d91(0x20d),_0x414d91(0x2ad));return;}if(currentChatView===_0x414d91(0x2a3))_0x1ba394=_0x414d91(0x234)+_0x48cb54;else currentChatView===_0x414d91(0x211)&&(_0x1ba394=_0x414d91(0x1fe)+USER_DEVICE_ID+'/'+_0x48cb54);if(!_0x1ba394){appendSystemMessage(_0x53fc10(0x116),_0x414d91(0x2ad));return;}enableChatInput(![]);const _0x30f8cf={'text':_0x16f2ce,'sender':_0x414d91(0x284),'timestamp':firebase[_0x414d91(0x265)][_0x414d91(0x25f)][_0x414d91(0x2d4)],'deviceId':USER_DEVICE_ID},_0x4231f4=database[_0x414d91(0x242)](_0x1ba394)[_0x414d91(0x25b)]();try{await _0x4231f4[_0x414d91(0x1de)](_0x30f8cf),console[_0x414d91(0x2a0)](_0x414d91(0x27e)+USER_DEVICE_ID+_0x414d91(0x235)+_0x1ba394+':',_0x4231f4[_0x414d91(0x285)]),messageInput[_0x414d91(0x2ba)]='',await getGeminiResponse(_0x16f2ce);}catch(_0x209433){console[_0x53fc10(0x1b7)](_0x414d91(0x293),_0x209433),appendSystemMessage(_0x414d91(0x261),_0x414d91(0x2ad)),enableChatInput(!![]);}if(chat)messageInput[_0x414d91(0x278)]();}),window[_0x250fab(0x203)](_0x250fab(0x279),()=>{const _0x5999fa=_0x384425,_0x2bd13=_0x250fab;console[_0x2bd13(0x2a0)](_0x5999fa(0x14e)),USER_DEVICE_ID=getOrCreateDeviceId(),populateModelSelector(),loadChatHistoryAndInit(),messageInput[_0x2bd13(0x278)]();});
</script>

</body>
</html>